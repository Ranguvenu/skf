{"version":3,"file":"smartfilter.min.js","sources":["../src/smartfilter.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This prevents time being wasted on preparing information for filters that they do not need.\n *\n * @module     block_learnerscript/smartfilter\n * @copyright  2023 Moodle India Information Solutions Private Limited\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery',\n        'block_learnerscript/ajax',\n        'block_learnerscript/reportwidget',\n        'block_learnerscript/report',\n        'block_learnerscript/flatpickr',\n        'block_learnerscript/serialize/jquery.serialize-object',\n        'core/str'],\n    function($, ajax, reportwidget, report, flatpickr, serialize, str) {\n        var BasicparamUser = $('.basicparamsform #id_filter_users');\n        var BasicparamActivity = $('.basicparamsform #id_filter_activities');\n\n        var FilterUser = $('.filterform #id_filter_users');\n        var FilterActivity = $('.filterform #id_filter_activities');\n\n        var selectduration = $('.durationfilter');\n        var reportcontenttype = $('.reportcontenttype');\n\n        var smartfilter = {\n            SelectDuration: function() {\n                var self=this;\n                selectduration.on('click', function(e){\n                    e.stopImmediatePropagation();\n                    var instanceid = $(this).data('blockinstance');\n                    var reportid = $(this).data('reportid');\n                    var reporttype = $(this).data('reporttype');\n                    var duration = $(this).data('duration');\n                    self.DurationFilter(duration,'true',reportid,instanceid, reporttype);\n                   if($('#reportcontainer'+instanceid).html().length > 0 ){\n                        $('#plotreportcontainer'+instanceid).data('reporttype',reporttype);\n                    }else{\n                        $('#reportcontainer'+instanceid).data('reporttype',reporttype);\n                    }\n                    $('#datefilter'+instanceid).trigger('click');\n\n                });\n            },\n            ReportContenttypes: function() {\n                reportcontenttype.on('click', function(e){\n                    e.stopImmediatePropagation();\n                    $('.navbar-collapse').collapse('hide');\n                    var instanceid = $(this).data('blockinstance');\n                    var reportid = $(this).data('reportid');\n                    var reporttype = $(this).data('reporttype');\n                    require(['block_learnerscript/reportwidget'], function(reportwidget) {\n                    reportwidget.CreateDashboardwidget({reporttype: reporttype, container:'#reporttype_'+instanceid,\n                                                    reportid:reportid, instanceid:instanceid,reportdashboard:1,\n                                                    selectreport: true});\n                    });\n                    if ($('#reportcontainer'+instanceid).html().length > 0 ) {\n                        $('#plotreportcontainer'+instanceid).data('reporttype', reporttype);\n                    } else {\n                        $('#reportcontainer'+instanceid).data('reporttype', reporttype);\n                    }\n                    $('#reportcontenttypes'+instanceid).trigger('click');\n                });\n            },\n            DurationFilter: function(value, reportdashboard, report1id=null, instanceid=null, reportcontenttype=null) {\n                var today = new Date();\n                var start_duration = '';\n                if (reportdashboard == false) {\n                    instanceid = '';\n                }\n                if (value !== 'clear') {\n                    $('#lsfenddate'+instanceid).val(today.getTime() / 1000);\n                    switch (value) {\n                        case 'week':\n                            start_duration = new Date(today.getFullYear(), today.getMonth(), today.getDate() - 7);\n                            break;\n                        case 'month':\n                            start_duration = new Date(today.getFullYear(), today.getMonth() - 1, today.getDate());\n                            break;\n                        case 'year':\n                            start_duration = new Date(today.getFullYear() - 1, today.getMonth(), today.getDate());\n                            break;\n                        case 'custom':\n                            var reportid = $('input[name=\"reportid\"]').val();\n                            $('#customrange'+instanceid).show();\n                            /**\n                            * Duration Filter\n                            */\n                            flatpickr('#customrange'+instanceid,{\n                                mode: 'range',\n                                onOpen: function(selectedDates, dateStr,instance){\n                                    instance.clear();\n                                },\n                                onClose: function(selectedDates, dateStr) {\n                                    $('#lsfstartdate'+instanceid).val(selectedDates[0].getTime() / 1000);\n                                    $('#lsfenddate'+instanceid).val((selectedDates[1].getTime() / 1000) + (60 * 60 * 24));\n                                    if (reportdashboard == false) {\n                                        require(['block_learnerscript/report'], function(report) {\n                                            report.CreateReportPage({ reportid: reportid, instanceid: instanceid,\n                                                reportdashboard: reportdashboard });\n                                        });\n                                    } else {\n                                        require(['block_learnerscript/report'], function(report) {\n                                            report.CreateReportPage({ reportid: report1id, instanceid: instanceid,\n                                                reportdashboard: reportdashboard });\n                                        });\n                                    }\n\n                                    $(\"#durtiontext\"+instanceid).text(dateStr);\n\n                            }\n                        });\n                            break;\n                        default:\n                            $('#lsfstartdate'+instanceid).val(0);\n                            break;\n                    }\n                    if (start_duration != '') {\n                        $('#lsfstartdate'+instanceid).val(start_duration.getTime() / 1000);\n                    }\n                } else {\n                    $('#lsfenddate'+instanceid).val(\"\");\n                    $('#lsfstartdate'+instanceid).val(\"\");\n                }\n                if (value !== 'custom') {\n                    if (reportdashboard != false) {\n                        require(['block_learnerscript/reportwidget'], function(reportwidget) {\n                               reportwidget.CreateDashboardwidget({\n                                reportid: report1id,\n                                reporttype: reportcontenttype,\n                                instanceid: instanceid\n                            });\n                        });\n                        str.get_string(value, 'block_reportdashboard').then(function(s) {\n                            $(\"#durtiontext\"+instanceid).text(s);\n                        });\n\n                    } else {\n                        var reportid = $('input[name=\"reportid\"]').val();\n                        require(['block_learnerscript/report'], function(report) {\n                            report.CreateReportPage({ reportid: reportid, instanceid: reportid, reportdashboard: reportdashboard });\n                        });\n                    }\n                    $('#customrange'+instanceid).val(\"\");\n                    $('#customrange'+instanceid).hide();\n                }\n                if (reportdashboard != true) {\n                    var reportid = $('input[name=\"reportid\"]').val();\n                    $('.plotgraphcontainer').removeClass('show').addClass('hide');\n                    $('#plotreportcontainer' + reportid).html('');\n                }\n\n            },\n            /**\n             * [FilterData description]\n             * @param {[type]} reportinstance [description]\n             */\n            FilterData: function(reportinstance) {\n                var reportfilter = $(\".filterform\" + reportinstance).serializeObject();\n                 $.urlParam = function(name) {\n                    var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\n                    if (results === null || results == ' ') {\n                       return null;\n                    } else {\n                       return results[1] || 0;\n                    }\n                };\n                var dashboardurl=$.urlParam('dashboardurl');\n                if(dashboardurl == 'Course'){\n                    var filter_courseid = $(\".report_courses\").val();\n                    reportfilter.filter_courses = filter_courseid;\n                }\n                return reportfilter;\n            },\n            BasicparamsData: function(reportinstance) {\n                var basicparams = $(\".basicparamsform\" + reportinstance).serializeObject();\n                return basicparams;\n            },\n            CourseData: function(args) {\n                var FirstElementActive = false;\n                if (BasicparamActivity.length > 0 || FilterActivity.length > 0) {\n                    if (BasicparamActivity.length > 0) {\n                        FirstElementActive = true;\n                    }\n                    if (args.courseid > 0) {\n                        this.CourseActivities({courseid: args.courseid,\n                            firstelementactive: FirstElementActive, activityid: args.filterrequests.filter_activities});\n                    }\n                }\n                if (BasicparamUser.length > 0 || FilterUser.length > 0) {\n                    if (BasicparamUser.length > 0) {\n                        FirstElementActive = true;\n                    }\n                }\n            },\n           categoryCourses: function(args) {\n            var currentcategory = $('#id_filter_coursecategories').find(\":selected\").val();\n            if (currentcategory > 0) {\n                var promise = ajax.call({\n                    args: {\n                        action: 'categorycourses',\n                        basicparam: true,\n                        reporttype: args.reporttype,\n                        categoryid: args.categoryid\n                    },\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n                });\n                promise.done(function(response) {\n                    var template = '';\n                    $.each(response, function(key, value) {\n                        template += '<option value = ' + key + '>' + value + '</option>';\n                    });\n                    $(\"#id_filter_courses\").html(template);\n                });\n            }\n        },\n        CourseActivities: function(args) {\n            var currentcourse = $('#id_filter_courses').find(\":selected\").val();\n            var requestedactivityid = args.activityid;\n            if (currentcourse > 0) {\n                var promise = ajax.call({\n                    args: {\n                        action: 'courseactivities',\n                        basicparam: true,\n                        courseid: args.courseid\n                    },\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n                });\n                promise.done(function(response) {\n                    var template = '';\n                    $.each(response, function(key, value) {\n                        var selected = '';\n                            if (key == requestedactivityid) {\n                                selected = 'selected';\n                            }\n                            template += '<option value = ' + key + ' ' + selected + ' >' + value + '</option>';\n                    });\n                    $(\"#id_filter_activities\").html(template);\n                    var currentactivity = $('.basicparamsform #id_filter_activities').find(\":selected\").val();\n                    if (currentactivity == 0 || currentactivity === null) {\n                    $('.basicparamsform #id_filter_activities').val($('.basicparamsform #id_filter_activities option:eq(1)').val());\n                    }\n                    $(\"#id_filter_activities\").trigger('change');\n                });\n            }\n        },\n\n        UserCourses: function(args) {\n            var currentcourse = $('#id_filter_courses').find(\":selected\").val();\n            $('#id_filter_courses').find('option')\n                .remove()\n                .end()\n                .append('<option value=\"\">' + str.get_string('filter_course', 'block_learnerscript').then(function(s){\n                    return s;\n                }) + '</option>');\n            if (args.userid >= 0) {\n                var promise = ajax.call({\n                    args: {\n                        action: 'usercourses',\n                        basicparam: true,\n                        userid: args.userid,\n                        reporttype: args.reporttype,\n                        reportid: args.reportid\n                    },\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n                });\n                promise.done(function(response) {\n                    $.each(response, function(key, value) {\n                        if(key == 0){\n                            return true;\n                        }\n                        if ((key == Object.keys(response)[0] && args.firstelementactive == 1) ||\n                                (key == currentcourse && args.firstelementactive == 1)) {\n                            $('#id_filter_courses').append($(\"<option></option>\")\n                                .attr(\"value\", key)\n                                .attr('selected', 'selected')\n                                .text(value));\n                            if(typeof args.triggercourseactivities != 'undefined' && args.triggercourseactivities == true){\n                                smartfilter.CourseActivities({ courseid: key });\n                            }\n                        } else {\n                            $('#id_filter_courses').append($(\"<option></option>\")\n                                .attr(\"value\", key)\n                                .text(value));\n                        }\n                    });\n\n                });\n            }\n        },\n        EnrolledUsers: function(args) {\n            var nearelement = args.element || $('#id_filter_users');\n            var currentuser = nearelement.val();\n            nearelement.find('option')\n                .remove()\n                .end()\n                .append('<option value=\"\">' + str.get_string('filter_user', 'block_learnerscript').then(function(s) {\n                    return s;\n                }) + '</option>');\n                var promise = ajax.call({\n                    args: {\n                        action: 'enrolledusers',\n                        basicparam: true,\n                        reportid: args.reportid,\n                        courseid: args.courseid,\n                        reporttype: args.reporttype,\n                        component: args.components\n                    },\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n                });\n                promise.done(function(response) {\n                    $.each(response, function(key, value) {\n                        if(key == 0){\n                            return true;\n                        }\n                        if (key != currentuser) {\n                            nearelement.append($(\"<option></option>\")\n                                .attr(\"value\", key)\n                                .text(value));\n                        } else {\n                            nearelement.append($(\"<option></option>\")\n                                .attr(\"value\", key)\n                                .attr('selected', 'selected')\n                                .text(value));\n                        }\n                    });\n                    if (!response.hasOwnProperty(currentuser)) {\n                    } else {\n                        nearelement.select2('val', \"\");\n                        var basicparamuserlen = nearelement.parents('.basicparamsform').length;\n                        if (basicparamuserlen > 0 && args.onloadtrigger) {\n                            $(\".basicparamsform #id_filter_apply\").trigger('click');\n                        }\n                    }\n                });\n\n        },\n        CohortUsers: function(args) {\n            var currentcohort = $('#id_filter_cohort').find(\":selected\").val();\n            if (currentcohort > 0) {\n                var promise = ajax.call({\n                    args: {\n                        action: 'cohortusers',\n                        basicparam: true,\n                        reporttype: args.reporttype,\n                        categoryid: args.cohortid\n                    },\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n                });\n                promise.done(function(response) {\n                    var template = '';\n                    $.each(response, function(key, value) {\n                        template += '<option value = ' + key + '>' + value + '</option>';\n                    });\n                    $(\"#id_filter_users\").html(template);\n                });\n            }\n        }\n        };\n        return smartfilter;\n    });\n"],"names":["define","$","ajax","reportwidget","report","flatpickr","serialize","str","BasicparamUser","BasicparamActivity","FilterUser","FilterActivity","selectduration","reportcontenttype","smartfilter","SelectDuration","self","this","on","e","stopImmediatePropagation","instanceid","data","reportid","reporttype","duration","DurationFilter","html","length","trigger","ReportContenttypes","collapse","require","CreateDashboardwidget","container","reportdashboard","selectreport","value","report1id","arguments","undefined","today","Date","start_duration","val","getTime","getFullYear","getMonth","getDate","show","mode","onOpen","selectedDates","dateStr","instance","clear","onClose","CreateReportPage","text","get_string","then","s","hide","removeClass","addClass","FilterData","reportinstance","reportfilter","serializeObject","urlParam","name","results","RegExp","exec","window","location","href","filter_courseid","filter_courses","BasicparamsData","CourseData","args","FirstElementActive","courseid","CourseActivities","firstelementactive","activityid","filterrequests","filter_activities","categoryCourses","find","call","action","basicparam","categoryid","url","M","cfg","wwwroot","done","response","template","each","key","currentcourse","requestedactivityid","selected","currentactivity","UserCourses","remove","end","append","userid","Object","keys","attr","triggercourseactivities","EnrolledUsers","nearelement","element","currentuser","component","components","hasOwnProperty","select2","parents","onloadtrigger","CohortUsers","cohortid"],"mappings":";;;;;;;AAsBAA,yCAAO,CAAC,SACA,2BACA,mCACA,6BACA,gCACA,wDACA,aACJ,SAASC,EAAGC,KAAMC,aAAcC,OAAQC,UAAWC,UAAWC,KAC1D,IAAIC,eAAiBP,EAAE,qCACnBQ,mBAAqBR,EAAE,0CAEvBS,WAAaT,EAAE,gCACfU,eAAiBV,EAAE,qCAEnBW,eAAiBX,EAAE,mBACnBY,kBAAoBZ,EAAE,sBAEtBa,YAAc,CACdC,eAAgB,WACZ,IAAIC,KAAKC,KACTL,eAAeM,GAAG,SAAS,SAASC,GAChCA,EAAEC,2BACF,IAAIC,WAAapB,EAAEgB,MAAMK,KAAK,iBAC1BC,SAAWtB,EAAEgB,MAAMK,KAAK,YACxBE,WAAavB,EAAEgB,MAAMK,KAAK,cAC1BG,SAAWxB,EAAEgB,MAAMK,KAAK,YAC5BN,KAAKU,eAAeD,SAAS,OAAOF,SAASF,WAAYG,YACvDvB,EAAE,mBAAmBoB,YAAYM,OAAOC,OAAS,EAC/C3B,EAAE,uBAAuBoB,YAAYC,KAAK,aAAaE,YAEvDvB,EAAE,mBAAmBoB,YAAYC,KAAK,aAAaE,YAEvDvB,EAAE,cAAcoB,YAAYQ,QAAQ,aAI5CC,mBAAoB,WAChBjB,kBAAkBK,GAAG,SAAS,SAASC,GACnCA,EAAEC,2BACFnB,EAAE,oBAAoB8B,SAAS,QAC/B,IAAIV,WAAapB,EAAEgB,MAAMK,KAAK,iBAC1BC,SAAWtB,EAAEgB,MAAMK,KAAK,YACxBE,WAAavB,EAAEgB,MAAMK,KAAK,cAC9BU,QAAQ,CAAC,qCAAqC,SAAS7B,cACvDA,aAAa8B,sBAAsB,CAACT,WAAYA,WAAYU,UAAU,eAAeb,WACrDE,SAASA,SAAUF,WAAWA,WAAWc,gBAAgB,EACzDC,cAAc,OAE1CnC,EAAE,mBAAmBoB,YAAYM,OAAOC,OAAS,EACjD3B,EAAE,uBAAuBoB,YAAYC,KAAK,aAAcE,YAExDvB,EAAE,mBAAmBoB,YAAYC,KAAK,aAAcE,YAExDvB,EAAE,sBAAsBoB,YAAYQ,QAAQ,aAGpDH,eAAgB,SAASW,MAAOF,iBAA0E,IAAzDG,UAASC,UAAAX,eAAAY,IAAAD,aAAAA,aAAC,KAAMlB,WAAUkB,UAAAX,eAAAY,IAAAD,aAAAA,aAAC,KAAM1B,kBAAiB0B,UAAAX,eAAAY,IAAAD,aAAAA,aAAC,KAChG,IAAIE,MAAQ,IAAIC,KACZC,eAAiB,GAIrB,GAHuB,GAAnBR,kBACAd,WAAa,IAEH,UAAVgB,MAAmB,CAEnB,OADApC,EAAE,cAAcoB,YAAYuB,IAAIH,MAAMI,UAAY,KAC1CR,OACJ,IAAK,OACDM,eAAiB,IAAID,KAAKD,MAAMK,cAAeL,MAAMM,WAAYN,MAAMO,UAAY,GACnF,MACJ,IAAK,QACDL,eAAiB,IAAID,KAAKD,MAAMK,cAAeL,MAAMM,WAAa,EAAGN,MAAMO,WAC3E,MACJ,IAAK,OACDL,eAAiB,IAAID,KAAKD,MAAMK,cAAgB,EAAGL,MAAMM,WAAYN,MAAMO,WAC3E,MACJ,IAAK,SACD,IAAIzB,SAAWtB,EAAE,0BAA0B2C,MAC3C3C,EAAE,eAAeoB,YAAY4B,OAI7B5C,UAAU,eAAegB,WAAW,CAChC6B,KAAM,QACNC,OAAQ,SAASC,cAAeC,QAAQC,UACpCA,SAASC,SAEbC,QAAS,SAASJ,cAAeC,SAC7BpD,EAAE,gBAAgBoB,YAAYuB,IAAIQ,cAAc,GAAGP,UAAY,KAC/D5C,EAAE,cAAcoB,YAAYuB,IAAKQ,cAAc,GAAGP,UAAY,IAAS,OAChD,GAAnBV,gBACAH,QAAQ,CAAC,+BAA+B,SAAS5B,QAC7CA,OAAOqD,iBAAiB,CAAElC,SAAUA,SAAUF,WAAYA,WACtDc,gBAAiBA,qBAGzBH,QAAQ,CAAC,+BAA+B,SAAS5B,QAC7CA,OAAOqD,iBAAiB,CAAElC,SAAUe,UAAWjB,WAAYA,WACvDc,gBAAiBA,qBAI7BlC,EAAE,eAAeoB,YAAYqC,KAAKL,YAI1C,MACJ,QACIpD,EAAE,gBAAgBoB,YAAYuB,IAAI,GAGpB,IAAlBD,gBACA1C,EAAE,gBAAgBoB,YAAYuB,IAAID,eAAeE,UAAY,UAGjE5C,EAAE,cAAcoB,YAAYuB,IAAI,IAChC3C,EAAE,gBAAgBoB,YAAYuB,IAAI,IAEtC,GAAc,WAAVP,MAAoB,CACpB,GAAuB,GAAnBF,gBACAH,QAAQ,CAAC,qCAAqC,SAAS7B,cAChDA,aAAa8B,sBAAsB,CAClCV,SAAUe,UACVd,WAAYX,kBACZQ,WAAYA,gBAGpBd,IAAIoD,WAAWtB,MAAO,yBAAyBuB,MAAK,SAASC,GACzD5D,EAAE,eAAeoB,YAAYqC,KAAKG,UAGnC,CACCtC,SAAWtB,EAAE,0BAA0B2C,MAC3CZ,QAAQ,CAAC,+BAA+B,SAAS5B,QAC7CA,OAAOqD,iBAAiB,CAAElC,SAAUA,SAAUF,WAAYE,SAAUY,gBAAiBA,qBAG7FlC,EAAE,eAAeoB,YAAYuB,IAAI,IACjC3C,EAAE,eAAeoB,YAAYyC,OAEjC,GAAuB,GAAnB3B,gBAAyB,CACrBZ,SAAWtB,EAAE,0BAA0B2C,MAC3C3C,EAAE,uBAAuB8D,YAAY,QAAQC,SAAS,QACtD/D,EAAE,uBAAyBsB,UAAUI,KAAK,MAQlDsC,WAAY,SAASC,gBACjB,IAAIC,aAAelE,EAAE,cAAgBiE,gBAAgBE,kBAUrD,GATCnE,EAAEoE,SAAW,SAASC,MACnB,IAAIC,QAAU,IAAIC,OAAO,OAAUF,KAAO,aAAaG,KAAKC,OAAOC,SAASC,MAC5E,OAAgB,OAAZL,SAA+B,KAAXA,QACd,KAEAA,QAAQ,IAAM,GAIT,UADFtE,EAAEoE,SAAS,gBACA,CACxB,IAAIQ,gBAAkB5E,EAAE,mBAAmB2C,MAC3CuB,aAAaW,eAAiBD,gBAElC,OAAOV,cAEXY,gBAAiB,SAASb,gBAEtB,OADkBjE,EAAE,mBAAqBiE,gBAAgBE,mBAG7DY,WAAY,SAASC,MACjB,IAAIC,oBAAqB,GACrBzE,mBAAmBmB,OAAS,GAAKjB,eAAeiB,OAAS,KACrDnB,mBAAmBmB,OAAS,IAC5BsD,oBAAqB,GAErBD,KAAKE,SAAW,GAChBlE,KAAKmE,iBAAiB,CAACD,SAAUF,KAAKE,SAClCE,mBAAoBH,mBAAoBI,WAAYL,KAAKM,eAAeC,sBAGhFhF,eAAeoB,OAAS,GAAKlB,WAAWkB,OAAS,IAC7CpB,eAAeoB,OAAS,IACxBsD,oBAAqB,IAIlCO,gBAAiB,SAASR,MACHhF,EAAE,+BAA+ByF,KAAK,aAAa9C,MACnD,GACJ1C,KAAKyF,KAAK,CACpBV,KAAM,CACFW,OAAQ,kBACRC,YAAY,EACZrE,WAAYyD,KAAKzD,WACjBsE,WAAYb,KAAKa,YAErBC,IAAKC,EAAEC,IAAIC,QAAU,mCAEjBC,MAAK,SAASC,UAClB,IAAIC,SAAW,GACfpG,EAAEqG,KAAKF,UAAU,SAASG,IAAKlE,OAC3BgE,UAAY,mBAAqBE,IAAM,IAAMlE,MAAQ,eAEzDpC,EAAE,sBAAsB0B,KAAK0E,cAIzCjB,iBAAkB,SAASH,MACvB,IAAIuB,cAAgBvG,EAAE,sBAAsByF,KAAK,aAAa9C,MAC1D6D,oBAAsBxB,KAAKK,WAC3BkB,cAAgB,GACFtG,KAAKyF,KAAK,CACpBV,KAAM,CACFW,OAAQ,mBACRC,YAAY,EACZV,SAAUF,KAAKE,UAEnBY,IAAKC,EAAEC,IAAIC,QAAU,mCAEjBC,MAAK,SAASC,UAClB,IAAIC,SAAW,GACfpG,EAAEqG,KAAKF,UAAU,SAASG,IAAKlE,OAC3B,IAAIqE,SAAW,GACPH,KAAOE,sBACPC,SAAW,YAEfL,UAAY,mBAAqBE,IAAM,IAAMG,SAAW,KAAOrE,MAAQ,eAE/EpC,EAAE,yBAAyB0B,KAAK0E,UAChC,IAAIM,gBAAkB1G,EAAE,0CAA0CyF,KAAK,aAAa9C,MAC7D,GAAnB+D,iBAA4C,OAApBA,iBAC5B1G,EAAE,0CAA0C2C,IAAI3C,EAAE,uDAAuD2C,OAEzG3C,EAAE,yBAAyB4B,QAAQ,cAK/C+E,YAAa,SAAS3B,MAClB,IAAIuB,cAAgBvG,EAAE,sBAAsByF,KAAK,aAAa9C,OAC9D3C,EAAE,sBAAsByF,KAAK,UACxBmB,SACAC,MACAC,OAAO,oBAAsBxG,IAAIoD,WAAW,gBAAiB,uBAAuBC,MAAK,SAASC,GAC/F,OAAOA,KACN,aACLoB,KAAK+B,QAAU,IACD9G,KAAKyF,KAAK,CACpBV,KAAM,CACFW,OAAQ,cACRC,YAAY,EACZmB,OAAQ/B,KAAK+B,OACbxF,WAAYyD,KAAKzD,WACjBD,SAAU0D,KAAK1D,UAEnBwE,IAAKC,EAAEC,IAAIC,QAAU,mCAEjBC,MAAK,SAASC,UAClBnG,EAAEqG,KAAKF,UAAU,SAASG,IAAKlE,OAC3B,GAAU,GAAPkE,IACC,OAAO,EAENA,KAAOU,OAAOC,KAAKd,UAAU,IAAiC,GAA3BnB,KAAKI,oBACpCkB,KAAOC,eAA4C,GAA3BvB,KAAKI,oBAClCpF,EAAE,sBAAsB8G,OAAO9G,EAAE,qBAC5BkH,KAAK,QAASZ,KACdY,KAAK,WAAY,YACjBzD,KAAKrB,aACgC,IAAhC4C,KAAKmC,yBAA0E,GAAhCnC,KAAKmC,yBAC1DtG,YAAYsE,iBAAiB,CAAED,SAAUoB,OAG7CtG,EAAE,sBAAsB8G,OAAO9G,EAAE,qBAC5BkH,KAAK,QAASZ,KACd7C,KAAKrB,eAO9BgF,cAAe,SAASpC,MACpB,IAAIqC,YAAcrC,KAAKsC,SAAWtH,EAAE,oBAChCuH,YAAcF,YAAY1E,MAC9B0E,YAAY5B,KAAK,UACZmB,SACAC,MACAC,OAAO,oBAAsBxG,IAAIoD,WAAW,cAAe,uBAAuBC,MAAK,SAASC,GAC7F,OAAOA,KACN,aACS3D,KAAKyF,KAAK,CACpBV,KAAM,CACFW,OAAQ,gBACRC,YAAY,EACZtE,SAAU0D,KAAK1D,SACf4D,SAAUF,KAAKE,SACf3D,WAAYyD,KAAKzD,WACjBiG,UAAWxC,KAAKyC,YAEpB3B,IAAKC,EAAEC,IAAIC,QAAU,mCAEjBC,MAAK,SAASC,WAClBnG,EAAEqG,KAAKF,UAAU,SAASG,IAAKlE,OAC3B,GAAU,GAAPkE,IACC,OAAO,EAEPA,KAAOiB,YACPF,YAAYP,OAAO9G,EAAE,qBAChBkH,KAAK,QAASZ,KACd7C,KAAKrB,QAEViF,YAAYP,OAAO9G,EAAE,qBAChBkH,KAAK,QAASZ,KACdY,KAAK,WAAY,YACjBzD,KAAKrB,WAGb+D,SAASuB,eAAeH,gBAEzBF,YAAYM,QAAQ,MAAO,IACHN,YAAYO,QAAQ,oBAAoBjG,OACxC,GAAKqD,KAAK6C,eAC9B7H,EAAE,qCAAqC4B,QAAQ,cAMnEkG,YAAa,SAAS9C,MACEhF,EAAE,qBAAqByF,KAAK,aAAa9C,MACzC,GACF1C,KAAKyF,KAAK,CACpBV,KAAM,CACFW,OAAQ,cACRC,YAAY,EACZrE,WAAYyD,KAAKzD,WACjBsE,WAAYb,KAAK+C,UAErBjC,IAAKC,EAAEC,IAAIC,QAAU,mCAEjBC,MAAK,SAASC,UAClB,IAAIC,SAAW,GACfpG,EAAEqG,KAAKF,UAAU,SAASG,IAAKlE,OAC3BgE,UAAY,mBAAqBE,IAAM,IAAMlE,MAAQ,eAEzDpC,EAAE,oBAAoB0B,KAAK0E,eAKvC,OAAOvF,WACX"}