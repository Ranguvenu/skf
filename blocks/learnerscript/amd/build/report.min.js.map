{"version":3,"file":"report.min.js","sources":["../src/report.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n\n/**\n * Standard Report wrapper for Moodle. It calls the central JS file for Report plugin,\n * Also it includes JS libraries like Select2,Datatables and Highcharts\n * @module     block_learnerscript/report\n * @class      report\n * @package\n * @copyright  2023 Moodle India Information Solutions Private Limited\n * @since      3.3\n */\ndefine(['jquery',\n    'block_learnerscript/select2/select2',\n    'block_learnerscript/datatables/jquery.dataTables',\n    'block_learnerscript/datatables/responsive.bootstrap',\n    'block_learnerscript/reportwidget',\n    'block_learnerscript/chart',\n    'block_learnerscript/smartfilter',\n    'block_learnerscript/schedule',\n    'block_learnerscript/helper',\n    'block_learnerscript/ajaxforms',\n    'block_learnerscript/ajax',\n    'block_learnerscript/radioslider/jquery.radios-to-slider',\n    'block_learnerscript/flatpickr',\n    'core/templates',\n    'core/str',\n    'jqueryui'\n], function($, select2, dataTable, responsive, reportwidget, chart, smartfilter, schedule, helper, AjaxForms, ajax,\n    RadiosToSlider, flatpickr, templates, Str) {\n    var BasicparamCourse = $('.basicparamsform #id_filter_courses');\n    var BasicparamUser = $('.basicparamsform #id_filter_users');\n    var BasicparamActivity = $('.basicparamsform #id_filter_activities');\n\n    var FilterCourse = $('.filterform #id_filter_courses');\n    var FilterUser = $('.filterform #id_filter_users');\n    var FilterActivity = $('.filterform #id_filter_activities');\n    var FilterModule = $('.filterform #id_filter_modules');\n    var FilterCohort = $('.filterform #id_filter_cohort');\n\n    var NumberOfBasicParams = 0;\n\n    var report = {\n        init: function(args) {\n            /**\n             * Initialization\n             */\n            $.ui.dialog.prototype._focusTabbable = $.noop;\n            $.fn.dataTable.ext.errMode = 'none';\n\n            $('.plotgraphcontainer').on('click', function() {\n                var reportid = $(this).data('reportid');\n                $('.plotgraphcontainer').removeClass('show').addClass('hide');\n                $('#plotreportcontainer' + reportid).html('');\n\n            });\n            /**\n             * Send message to user from username otion in report\n             */\n            $(document).on('click', \".sendusermsg\", function(e) {\n                var userid = $(this).data('userid');\n                var reportinstance = $(this).data('reportinstance');\n                var userfullname = $(this).data('userfullname');\n\n                helper.sendmessage({userid: userid, reportinstance: reportinstance}, userfullname);\n                e.stopImmediatePropagation();\n            });\n\n            /**\n             * Report graphs display\n             */\n            $(document).on('click', \".ls-plotgraph_link\", function() {\n                var reportid = $(this).data('reportid');\n                var reporttype = $(this).data('reporttype');\n                reportwidget.CreateDashboardwidget({reportid: reportid, reporttype: reporttype});\n            });\n\n            /**\n             * Report calender filter display\n             */\n            $(document).on('click', \".calenderdatefilter\", function() {\n                var activefilter = $(this).data('activefilter');\n                var inactivefilter = $(this).data('inactivefilter');\n                helper.ViewReportFilters({activefilter: activefilter, inactivefilter: inactivefilter});\n            });\n\n            /**\n             * Report custom filters display\n             */\n            $(document).on('click', \".customfiltericon\", function() {\n                var activefilter = $(this).data('activefilter');\n                var inactivefilter = $(this).data('inactivefilter');\n                helper.ViewReportFilters({activefilter: activefilter, inactivefilter: inactivefilter});\n            });\n\n            /**\n             * Statistics report help text\n             */\n            $(document).on('click', \".statisticshelptext\", function() {\n                var reportid = $(this).data('reportid');\n                report.block_statistics_help(reportid);\n            });\n\n            /**\n             * Plotform tabs graph edit\n             */\n\n            $(document).on('click', \".ls-plotreport_editicon\", function() {\n                var reportid = $(this).data(\"reportid\");\n                var action = $(this).data(\"action\");\n                var component = $(this).data(\"component\");\n                var title = $(this).data(\"title\");\n                var pname = $(this).data(\"pname\");\n                var cid = $(this).data(\"cid\");\n                var type = $(this).data(\"type\");\n                helper.PlotForm({reportid : reportid, action : action, component : component, title : title,\n                pname : pname, cid : cid, type : type });\n            });\n\n            /**\n             * Plotform tabs graph delete\n             */\n\n            $(document).on('click', \".ls-plotreport_deleteicon\", function() {\n                var reportid = $(this).data(\"reportid\");\n                var pname = $(this).data(\"pname\");\n                var cid = $(this).data(\"cid\");\n                var gdelete = $(this).data(\"delete\");\n                var comp = $(this).data(\"comp\");\n                var action = $(this).data(\"graphaction\");\n                helper.deleteConfirm({reportid : reportid, action : action, comp : comp, pname : pname, cid : cid, delete : gdelete});\n            });\n\n            /**\n             * Plotform tabs add graph\n             */\n\n            $(document).on('click', \".plotgraphoptions\", function() {alert(34)\n                var reportid = $(this).data(\"reportid\");\n                var action = $(this).data(\"action\");\n                var component = $(this).data(\"component\");\n                var title = $(this).data(\"title\");\n                var pname = $(this).data(\"pname\");\n                var type = $(this).data(\"type\");\n                helper.PlotForm({reportid : reportid, action : action, component : component, title : title,\n                pname : pname, type : type });\n            });\n            \n            /**\n             * Select2 initialization\n             */\n            $(\"select[data-select2='1']\").select2({\n                theme: \"classic\"\n            }).on(\"select2:selecting\", function(e) {\n                if ($(this).val() && $(this).data('maximumselectionlength') &&\n                    $(this).val().length >= $(this).data('maximumselectionlength')) {\n                    e.preventDefault();\n                    $(this).select2('close');\n                }\n            });\n\n            /*\n             * Report search\n             */\n            $(\"#reportsearch\").val(args.reportid).trigger('change.select2');\n            $(\"#reportsearch\").change(function() {\n                var reportid = $(this).find(\":selected\").val();\n                window.location = M.cfg.wwwroot + '/blocks/learnerscript/viewreport.php?id=' + reportid;\n            });\n            /**\n             * Duration buttons\n             */\n            RadiosToSlider.init($('#segmented-button'), {\n                size: 'medium',\n                animation: true,\n                reportdashboard: false\n            });\n            /**\n             * Duration Filter\n             */\n            flatpickr('#customrange', {\n                mode: 'range',\n                onOpen: function(selectedDates, dateStr, instance) {\n                    instance.clear();\n                },\n                onClose: function(selectedDates) {\n                    if (selectedDates.length !== 0) {\n                        $('#lsfstartdate').val(selectedDates[0].getTime() / 1000);\n                        $('#lsfenddate').val((selectedDates[1].getTime() / 1000) + (60 * 60 * 24));\n                        require(['block_learnerscript/report'], function(report) {\n                            report.CreateReportPage({reportid: args.reportid, instanceid: args.reportid, reportdashboard: false});\n                        });\n                    }\n                }\n            });\n            /*\n             * Get users for selected course\n             */\n            $('#id_filter_cohort').change(function() {\n                var cohortid = $(this).find(\":selected\").val();\n                if (cohortid > 0 && (FilterUser.length > 0 || BasicparamUser.length > 0)) {\n                    if (BasicparamUser.length > 0) {\n                        FirstElementActive = true;\n                    }\n                    smartfilter.CohortUsers({cohortid: cohortid, reporttype: args.reporttype, reportid: args.reportid,\n                                              firstelementactive: FirstElementActive});\n                }\n            });\n\n            /*\n             * Get Activities and Enrolled users for selected course\n             */\n            if (typeof BasicparamCourse != 'undefined' || typeof FilterCourse != 'undefined') {\n                $('#id_filter_courses').change(function() {\n                    args.courseid = $(this).find(\":selected\").val();\n                    smartfilter.CourseData(args);\n                });\n            }\n\n            /*\n             * Get Enrolled courses for selected user\n             */\n            $('#id_filter_users').change(function() {\n                var userid = $(this).find(\":selected\").val();\n                if (userid > 0 && (FilterCourse.length > 0 || BasicparamCourse.length > 0)) {\n                    if (BasicparamCourse.length > 0) {\n                        FirstElementActive = true;\n                    }\n                }\n            });\n\n            $('#id_filter_coursecategories').change(function() {\n                var categoryid = $(this).find(\":selected\").val();\n                smartfilter.categoryCourses({categoryid: categoryid, reporttype: args.reporttype});\n            });\n\n            schedule.SelectRoleUsers();\n\n            if (args.basicparams !== null) {\n                if (args.basicparams[0].name == 'courses') {\n                    $(\"#id_filter_courses\").trigger('change');\n                    NumberOfBasicParams++;\n                }\n            }\n            if (args.basicparams !== null) {\n                var FirstElementActive = false;\n                if (args.basicparams[0].name == 'users') {\n                    if (BasicparamCourse.length > 0) {\n                        FirstElementActive = true;\n                    }\n                    var userid = $(\"#id_filter_users\").find(\":selected\").val();\n                    if (userid > 0) {\n                        args.courseid = $('#id_filter_courses').find(\":selected\").val();\n                        smartfilter.CourseData(args);\n                    }\n                }\n            }\n\n            // For forms formatting..can't make unique everywhere, so little trick ;)\n            $('.filterform' + args.reportid + ' .fitemtitle').hide();\n            $('.filterform' + args.reportid + ' .felement').attr('style', 'margin:0');\n\n            $('.basicparamsform' + args.reportid + ' .fitemtitle').hide();\n            $('.basicparamsform' + args.reportid + ' .felement').attr('style', 'margin:0');\n\n            /*\n             * Filter form submission\n             */\n            $(\".filterform #id_filter_clear\").click(function() {\n                $(\".filterform\" + args.reportid).trigger(\"reset\");\n                if (FilterUser.length > 0) {\n                    if (FilterCourse.length > 0 || BasicparamCourse.length > 0) {\n                        if (BasicparamCourse.length > 0) {\n                            FirstElementActive = true;\n                        }\n                    }\n                }\n                if (FilterCourse.length > 0) {\n                    if (FilterUser.length > 0 || BasicparamUser.length > 0) {\n                    }\n\n                    if (FilterActivity.length > 0 || BasicparamActivity.length > 0) {\n                        smartfilter.CourseActivities({courseid: 0});\n                    }\n                }\n                if (FilterActivity.length > 0 || FilterModule.length > 0) {\n                    if ((FilterCourse.length > 0 || BasicparamCourse.length > 0) && BasicparamUser.length == 0) {\n                        if (BasicparamCourse.length > 0 && BasicparamUser.length == 0) {\n                            FirstElementActive = true;\n                        }\n                    }\n                    if (BasicparamCourse.length > 0 && BasicparamUser.length > 0) {\n                            $(\".basicparamsform #id_filter_apply\").trigger('click', [true]);\n                    }\n                }\n                if (FilterCohort.length > 0) {\n                    if (FilterUser.length > 0) {\n                        smartfilter.CohortUsers({cohortid: 0});\n                    }\n                }\n\n                if ($(\".basicparamsform #id_filter_apply\").length > 0) {\n                    $(document).ajaxComplete(function() {\n                    });\n                    $(\".basicparamsform #id_filter_apply\").trigger('click', [true]);\n                } else {\n                    args.reporttype = $('.ls-plotgraphs_listitem.ui-tabs-active').data('cid');\n                    report.CreateReportPage({reportid: args.reportid, reporttype: args.reporttype, instanceid: args.reportid,\n                        reportdashboard: false,\n                    });\n                }\n                $(\".filterform select[data-select2='1']\").select2(\"destroy\").select2({theme: \"classic\"});\n                $(\".filterform select[data-select2-ajax='1']\").val('0').trigger('change');\n                $('.filterform')[0].reset();\n                $(\".filterform #id_filter_clear\").attr('disabled', 'disabled');\n                $('.plotgraphcontainer').removeClass('show').addClass('hide');\n                $('#plotreportcontainer' + args.instanceid).html('');\n            });\n\n            /*\n             * Basic parameters form submission\n             */\n            $(\".basicparamsform #id_filter_apply,.filterform #id_filter_apply\").click(function(e, validate) {\n                var getreport = helper.validatebasicform(validate);\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                $(\".filterform\" + args.reportid).show();\n                args.instanceid = args.reportid;\n                if (e.currentTarget.value != 'Get Report') {\n                    $(\".filterform #id_filter_clear\").removeAttr('disabled');\n                }\n                if ($.inArray(0, getreport) != -1) {\n                    $(\"#report_plottabs\").hide();\n                    Str.get_string('nodataavailable', 'block_learnerscript').then(function(s) {\n                        $(\"#reportcontainer\" + args.reportid).html(\"<div class='alert alert-info'>\" + s + \"</div>\");\n                    });\n                } else {\n                    $(\"#report_plottabs\").show();\n                    args.reporttype = $('.ls-plotgraphs_listitem.ui-tabs-active').data('cid');\n                    report.CreateReportPage({reportid: args.reportid, reporttype: args.reporttype,\n                        instanceid: args.instanceid, reportdashboard: false});\n                }\n                $('.plotgraphcontainer').removeClass('show').addClass('hide');\n                $('#plotreportcontainer' + args.instanceid).html('');\n            });\n            /*\n             * Generate Plotgraph\n             */\n            if (args.basicparams === null) {\n                report.CreateReportPage({reportid: args.reportid, reporttype: args.reporttype,\n                    instanceid: args.reportid, reportdashboard: false});\n            } else {\n                if (args.basicparams.length <= 4) {\n                    $(\".basicparamsform #id_filter_apply\").trigger('click', [true]);\n                } else {\n                        $(document).ajaxComplete(function(event, xhr, settings) {\n                            if (settings.url.indexOf(\"blocks/learnerscript/ajax.php\") > 0) {\n                                if (typeof settings.data != 'undefined') {\n                                    var ajaxaction = $.parseJSON(settings.data);\n                                    if (typeof ajaxaction.basicparam != 'undefined' && ajaxaction.basicparam == true) {\n                                        NumberOfBasicParams++;\n                                    }\n                                }\n                                if (args.basicparams.length == NumberOfBasicParams\n                                    && ajaxaction.action != 'plotforms' && ajaxaction.action != 'pluginlicence') {\n                                    $(\".basicparamsform #id_filter_apply\").trigger('click', [true]);\n                                }\n                            }\n                        });\n                }\n            }\n        },\n        CreateReportPage: function(args) {\n            var disabletable = 0;\n            if (args.reportdashboard == false) {\n                var disabletable = $('#disabletable').val();\n                if (disabletable) {\n                    args.reporttype = $($('.ls-plotgraphs_listitem')[0]).data('cid');\n                }\n            }\n            if (disabletable == 1 && args.reporttype.length > 0) {\n                chart.HighchartsAjax({\n                    'reportid': args.reportid,\n                    'action': 'generate_plotgraph',\n                    'cols': args.cols,\n                    'reporttype': args.reporttype\n                });\n            } else if (disabletable == 0) {\n                require(['block_learnerscript/reportwidget'], function(reportwidget) {\n                    reportwidget.CreateDashboardwidget({\n                        reportid: args.reportid,\n                        reporttype: 'table',\n                        instanceid: args.instanceid,\n                        reportdashboard: args.reportdashboard\n                    });\n                });\n            } else {\n\n            }\n        },\n\n        /**\n         * Generates graph widget with given Highcharts ajax response\n         * @param {object} response Ajax response\n         * @return Creates highchart widget with given response based on type of chart\n         */\n        generate_plotgraph: function(response) {\n            if (response) {\n                var reportinstance = response.reportinstance || response.reportid;\n                response.containerid = 'plotreportcontainer' + reportinstance;\n                switch (response.type) {\n                    case 'spline':\n                    case 'bar':\n                    case 'column':\n                        chart.lbchart(response);\n                        break;\n                    case 'radar':\n                        chart.radarchart(response);\n                        break;\n                    case 'combination':\n                        chart.combinationchart(response);\n                        break;\n\t\t    case 'pie':\n                    \tchart.piechart(response);\n                    \tbreak;\n                }\n            }\n        },\n\n        /**\n         * Datatable serverside for all table type reports\n         * @param {object} args reportid\n         * @return Apply serverside datatable to report table\n         */\n        ReportDatatable: function(args) {\n            Str.get_strings([{\n                key: 'show',\n                component: 'block_learnerscript'\n            },{\n                key: 'show_all',\n                component: 'block_learnerscript'\n            },{\n                key: 'nodataavailable',\n                component: 'block_learnerscript'\n            }, {\n                key: 'search',\n                component: 'block_learnerscript'\n            }]).then(function(s){\n                var params = {};\n                var reportinstance = args.instanceid ? args.instanceid : args.reportid;\n                params.filters = args.filters;\n                params.basicparams = args.basicparams || JSON.stringify(smartfilter.BasicparamsData(reportinstance));\n                params.reportid = args.reportid;\n                params.columns = args.columns;\n                //\n                // Pipelining function for DataTables. To be used to the `ajax` option of DataTables\n                //\n                $.fn.dataTable.pipeline = function(opts) {\n                    // Configuration options\n                    var conf = $.extend({\n                        url: '', // Script url\n                        data: null, // Function or object with parameters to send to the server\n                        method: 'POST' // Ajax HTTP method\n                    }, opts);\n\n                    return function(request, drawCallback, settings) {\n                        var ajax = true;\n                        var requestStart = request.start;\n                        var requestLength = request.length;\n                        var json;\n                        var cacheLastJson;\n                        var cacheLower;\n                        if (typeof args.data != 'undefined' && request.draw == 1) {\n                            json = args.data;\n                            json.draw = request.draw; // Update the echo for each response\n                            json.data.splice(0, requestStart);\n                            json.data.splice(requestLength, json.data.length);\n                            drawCallback(json);\n                        } else if (ajax) {\n                            // Need data from the server\n                            request.start = requestStart;\n                            request.length = requestLength;\n                            $.extend(request, conf.data);\n\n                            settings.jqXHR = $.ajax({\n                                \"type\": conf.method,\n                                \"url\": conf.url,\n                                \"data\": request,\n                                \"dataType\": \"json\",\n                                \"cache\": false,\n                                \"success\": function(json) {\n                                    drawCallback(json);\n                                }\n                            });\n                        } else {\n                            json = $.extend(true, {}, cacheLastJson);\n                            json.draw = request.draw; // Update the echo for each response\n                            json.data.splice(0, requestStart - cacheLower);\n                            json.data.splice(requestLength, json.data.length);\n                            drawCallback(json);\n                        }\n                    };\n                };\n                if (args.reportname == 'Users profile' || args.reportname == 'Course profile') {\n                    var lengthoptions = [\n                        [50, 100, -1],\n                        [s[0] + \"50\", s[0] + \"100\", s[1]]\n                    ];\n                } else {\n                    var lengthoptions = [\n                        [10, 25, 50, 100, -1],\n                        [s[0] + \"10\", s[0] + \"25\", s[0] + \"50\", s[0] + \"100\", s[1]]\n                    ];\n                }\n\n                $('#reporttable_' + reportinstance).DataTable({\n                    'processing': true,\n                    'serverSide': true,\n                    'destroy': true,\n                    'dom': '<\"co_report_header\"Bf <\"report_header_skew\"  <\"report_header_skew_content\" Bl' +\n                    '<\"report_header_showhide\" >' +\n                    '<\"report_calculation_showhide\" >> > > tr <\"co_report_footer\"ip>',\n                    'ajax': $.fn.dataTable.pipeline({\n                        \"type\": \"POST\",\n                        \"url\": M.cfg.wwwroot + '/blocks/learnerscript/components/datatable/server_processing.php?sesskey=' +\n                        M.cfg.sesskey,\n                        \"data\": params\n                    }),\n                    'columnDefs': args.columnDefs,\n                    \"fnDrawCallback\": function() {\n                        helper.DrilldownReport();\n                    },\n                    \"oScroll\": {},\n                    'responsive': true,\n                    \"fnInitComplete\": function() {\n                        if (args.reportname == 'Users profile' || args.reportname == 'Course profile'\n                            || args.reportname == 'Statistic') {\n                            $(\"#reporttable_\" + reportinstance + \"_wrapper .co_report_header\").remove();\n                            $(\"#reporttable_\" + reportinstance + \"_wrapper .co_report_footer\").remove();\n                        }\n\n                        $('.download_menu' + reportinstance + ' li a').each(function() {\n                            var link = $(this).attr('href');\n                            if (typeof args.basicparams != 'undefined') {\n                                var basicparamsdata = JSON.parse(args.basicparams);\n                                $.each(basicparamsdata, function(key, value) {\n                                    if (key.indexOf('filter_') == 0) {\n                                        link += '&' + key + '=' + value;\n                                    }\n                                });\n                            }\n                            if (typeof (args.filters) != 'undefined') {\n                                var filters = JSON.parse(args.filters);\n                                $.each(filters, function(key, value) {\n                                    if (key.indexOf('filter_') == 0) {\n                                        link += '&' + key + '=' + value;\n                                    }\n                                    if (key.indexOf('lsf') == 0) {\n                                        link += '&' + key + '=' + value;\n                                    }\n                                });\n                            }\n                            $(this).attr('href', link);\n                        });\n                    },\n                    \"fnRowCallback\": function(nRow) {\n                        $(nRow).children().each(function(index, td) {\n                            $(td).css(\"word-break\", args.columnDefs[index].wrap);\n                            $(td).css(\"width\", args.columnDefs[index].width);\n                        });\n                        return nRow;\n                    },\n                    \"autoWidth\": false,\n                    'aaSorting': [],\n                    'language': {\n                        'paginate': {\n                            'previous': '<',\n                            'next': '>'\n                        },\n                        'sProcessing': \"<img src='\" + M.util.image_url('loading', 'block_learnerscript') + \"'>\",\n                        'search': \"_INPUT_\",\n                        'searchPlaceholder': s[3],\n                        'lengthMenu': \"_MENU_\",\n\t\t\t \"emptyTable\": \"<div class='alert alert-info'>\" + s[2] + \"</div>\"\n                    },\n                    \"lengthMenu\": lengthoptions\n                });\n                $(\".drilldown\" + reportinstance + \" .ui-dialog-title\").html(args.reportname);\n                $(\"#page-blocks-learnerscript-viewreport #reporttable_\" + args.reportid + \"_wrapper div.report_header_showhide\").\n                html($('#export_options' + args.reportid).html());\n                if ($('.reportcalculation' + args.reportid).length > 0) {\n                    $(\"#page-blocks-learnerscript-viewreport #reporttable_\" +\n                    args.reportid + \"_wrapper div.report_calculation_showhide\").\n                    html('<img src=\"' + M.util.image_url('calculationicon', 'block_learnerscript') +\n                    '\" onclick=\"(function(e){ require(\\'block_learnerscript/helper\\').reportCalculations({reportid:' +\n                    args.reportid + '}) })(event)\" title =\"Calculations\" />');\n                }\n            });\n        },\n\n        AddExpressions: function(e, value) {\n            $(e.target).on('select2:unselecting', function(e) {\n                $('#fitem_id_' + e.params.args.data.id + '').remove();\n            });\n            var columns = $(e.target).val();\n            $.each(columns, function(index) {\n                if ($('#fitem_id_' + columns[index]).length > 0) {\n                    return;\n                }\n                var column = [];\n                 column.name = columns[index];\n                 column.conditionsymbols = [];\n                 var conditions = [\"=\", \">\", \"<\", \">=\", \"<=\", \"<>\"];\n                 $.each(conditions, function(index, value) {\n                    column.conditionsymbols.push({\n                        'value': value\n                    });\n                 });\n                var requestdata = {column: column};\n                templates.render('block_learnerscript/plotconditions', requestdata).then(function(html) {\n                    if (value == 'yaxisbarvalue') {\n                        $('#yaxis_bar1').append(html);\n                    } else {\n                        $('#yaxis1').append(html);\n                    }\n\n                }).fail(function() {});\n            });\n        },\n        block_statistics_help: function(reportid) {\n            var promise = ajax.call({\n                args: {\n                    action: 'learnerscriptdata',\n                    reportid: reportid\n                },\n                url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n            });\n            promise.done(function(response) {\n                require(['core/modal_factory'], function(ModalFactory) {\n                    ModalFactory.create({\n                        title: response.name,\n                        body: response.summary,\n                        footer: '',\n                    }).done(function(modal) {\n                        var dialogue = modal;\n                        var ModalEvents = require('core/modal_events');\n                        dialogue.getRoot().on(ModalEvents.hidden, function() {\n                        });\n\n                        dialogue.show();\n                    });\n                });\n            });\n        },\n        CourseprofileReportsdata: function(args) {\n            if (args.reporttype == 'table') {\n                reportwidget.CreateDashboardwidget({\n                    reportid: args.reportid,\n                    reporttype: 'table',\n                    instanceid: args.instanceid,\n                    reportdashboard: args.reportdashboard,\n                    filters: args.filters\n                });\n            } else {\n                chart.HighchartsAjax({\n                    'reportid': args.reportid,\n                    'action': 'generate_plotgraph',\n                    'cols': args.cols,\n                    'reporttype': args.reporttype,\n                    'filters': args.filters\n                });\n            }\n        }\n\n    };\n    return report;\n});\n"],"names":["define","$","select2","dataTable","responsive","reportwidget","chart","smartfilter","schedule","helper","AjaxForms","ajax","RadiosToSlider","flatpickr","templates","Str","BasicparamCourse","BasicparamUser","BasicparamActivity","FilterCourse","FilterUser","FilterActivity","FilterModule","FilterCohort","NumberOfBasicParams","report","init","args","ui","dialog","prototype","_focusTabbable","noop","fn","ext","errMode","on","reportid","this","data","removeClass","addClass","html","document","e","userid","reportinstance","userfullname","sendmessage","stopImmediatePropagation","reporttype","CreateDashboardwidget","activefilter","inactivefilter","ViewReportFilters","block_statistics_help","action","component","title","pname","cid","type","PlotForm","gdelete","comp","deleteConfirm","delete","alert","theme","val","length","preventDefault","trigger","change","find","window","location","M","cfg","wwwroot","size","animation","reportdashboard","mode","onOpen","selectedDates","dateStr","instance","clear","onClose","getTime","require","CreateReportPage","instanceid","cohortid","FirstElementActive","CohortUsers","firstelementactive","courseid","CourseData","categoryid","categoryCourses","SelectRoleUsers","basicparams","name","hide","attr","click","CourseActivities","ajaxComplete","reset","validate","getreport","validatebasicform","show","currentTarget","value","removeAttr","inArray","get_string","then","s","event","xhr","settings","url","indexOf","ajaxaction","parseJSON","basicparam","disabletable","HighchartsAjax","cols","generate_plotgraph","response","containerid","lbchart","radarchart","combinationchart","piechart","ReportDatatable","get_strings","key","params","filters","JSON","stringify","BasicparamsData","columns","pipeline","opts","conf","extend","method","request","drawCallback","json","requestStart","start","requestLength","draw","splice","jqXHR","dataType","cache","success","reportname","lengthoptions","DataTable","processing","serverSide","destroy","dom","sesskey","columnDefs","fnDrawCallback","DrilldownReport","oScroll","fnInitComplete","remove","each","link","basicparamsdata","parse","fnRowCallback","nRow","children","index","td","css","wrap","width","autoWidth","aaSorting","language","paginate","previous","next","sProcessing","util","image_url","search","searchPlaceholder","lengthMenu","emptyTable","AddExpressions","target","id","column","conditionsymbols","push","requestdata","render","append","fail","call","done","ModalFactory","create","body","summary","footer","modal","dialogue","ModalEvents","getRoot","hidden","CourseprofileReportsdata"],"mappings":"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"}