/**
 * Configured the reports on dashboard when we install plugin.
 *
 * @module     block_learnerscript/lsreportconfig
 * @copyright  2023 Moodle India Information Solutions Private Limited
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_learnerscript/lsreportconfig",["jquery","core/ajax","core/str","jqueryui"],(function($,Ajax,Str){var lsreportconfig={slideIndex:1,currentSlide:function(currentSlideIndex){lsreportconfig.lsreportslideshow(lsreportconfig.slideIndex=currentSlideIndex)},progressbar:$("#progressbar"),lsreportslideshow:function(currentSlideIndex){var i,slides=document.getElementsByClassName("mySlides");for(currentSlideIndex>slides.length&&(lsreportconfig.slideIndex=1),currentSlideIndex<1&&(lsreportconfig.slideIndex=slides.length),i=0;i<slides.length;i++)slides[i].style.display="none";slides[lsreportconfig.slideIndex-1].style.display="block",setTimeout((function(){lsreportconfig.slideIndex>=slides.length?lsreportconfig.currentSlide(1):lsreportconfig.lsreportslideshow(lsreportconfig.slideIndex++)}),3e3)},lsconfigimportprogress:function(args){var total=args.total,current=args.current,errorreportspositiondata=args.errorreportspositiondata,lastreportposition=args.lastreportposition;Ajax.call([{methodname:"block_learnerscript_importreports",args:{total:total,current:current,errorreportspositiondata:errorreportspositiondata,lastreportposition:lastreportposition}}],!1)[0].done((function(response){var resp=$.parseJSON(response);lsreportconfig.progressbar.progressbar("value",resp.percent),resp.percent<100&&(resp.current&&resp.current>0?args.current=resp.current:args.current=args.current+1,setTimeout((function(){lsreportconfig.lsconfigimportprogress(args)}),500))}))},lsconfigresetprogress:function(step){Ajax.call([{methodname:"block_learnerscript_resetlsconfig",args:{step:step}}],!1)[0].done((function(response){var resp=$.parseJSON(response);lsreportconfig.progressbar.progressbar("value",resp.percent),100==resp.percent&&(window.location.href=M.cfg.wwwroot+"/blocks/learnerscript/lsconfig.php?import=1"),resp.percent<100&&(resp.next&&resp.next>0&&(step=resp.next),setTimeout((function(){lsreportconfig.lsconfigresetprogress(step)}),500))}))},lsreportconfigimport:function(){Ajax.call([{methodname:"block_learnerscript_lsreportconfigimport",args:{}}])[0].done((function(){Str.get_string("messagehandler","block_learnerscript").then((function(s){return s}))}))}};return{init:function(args,status){lsreportconfig.progressbar.progressbar({value:!1,change:function(){},complete:function(){$("#reportdashboardnav").show(500)}}),$(".mySlides").length>0&&lsreportconfig.lsreportslideshow(1),"import"==status?lsreportconfig.lsconfigimportprogress(args):"reset"==status&&lsreportconfig.lsconfigresetprogress(1),window.onbeforeunload=lsreportconfig.lsreportconfigimport}}}));

//# sourceMappingURL=lsreportconfig.min.js.map