{"version":3,"file":"reportdashboard.min.js","sources":["../src/reportdashboard.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Describe the module reportdashboard information\n *\n * @module     block_reportdashboard/reportdashboard\n * @copyright  2023 Moodle India Information Solutions Private Limited\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery',\n        'core/ajax',\n        'block_learnerscript/report',\n        'block_learnerscript/reportwidget',\n        'block_learnerscript/schedule',\n        'block_learnerscript/helper',\n        'block_learnerscript/ajax',\n        'block_learnerscript/select2/select2',\n        'block_learnerscript/datatables/jquery.dataTables',\n        'block_learnerscript/smartfilter',\n        'block_learnerscript/flatpickr',\n        'core/str',\n        'jqueryui',\n        'block_learnerscript/bootstrapnotify/bootstrapnotify',\n    ],\n    function($, Ajax, report, reportwidget, schedule, helper, ajax, select2, dataTable,\n        smartfilter, flatpickr, Str) {\n        return {\n            init: function() {\n                    $(document).ajaxStop(function() {\n                         $(\".loader\").fadeOut(\"slow\");\n                    });\n                    helper.Select2Ajax({});\n                    $(\".dashboardcourses\").change(function() {\n                        var courseid = $(this).val();\n                        $(\".report_courses\").val(courseid);\n                        reportwidget.DashboardTiles();\n                        reportwidget.DashboardWidgets();\n                        $(\".viewmore\").each(function() {\n                            $(this).attr('href');\n                        });\n                    });\n                    \n                    $( \"#createdashbaord_form\" ).submit(function( event ) {\n                        var dashboardname = $( \"#id_dashboard\" ).val();\n                        var name = dashboardname.trim();\n                        if(name === '' || name === null){\n                            $( \"#id_error_dashboard\" ).css('display', 'block');\n                            $( \"#id_error_dashboard_nospaces\" ).css('display', 'none');\n                            event.preventDefault();\n                        }\n                        var spaceexist = name.indexOf(\" \");\n                        if(spaceexist > 0 && spaceexist != ''){\n                            $( \"#id_error_dashboard\" ).css('display', 'none');\n                            $( \"#id_error_dashboard_nospaces\" ).css('display', 'block');\n                            event.preventDefault();\n                        }\n                    });\n\n                $.ui.dialog.prototype._focusTabbable = $.noop;\n                $(\".sidenav\").offset({top: 0});\n                /**\n                 * Select2 Options\n                 */\n                $(\"select[data-select2='1']\").select2();\n                helper.Select2Ajax({\n                    action: 'reportlist',\n                    multiple: true\n                });\n\n                /**\n                 * Add widget to dashboard\n                 */\n                $(document).on('click', \".addwidgettodashboard\", function() {\n                    require(['block_reportdashboard/reportdashboard'], function(reportdashboard) {\n                        reportdashboard.addblocks_to_dashboard();\n                    });\n                });\n\n                /**\n                 * Add tiles to dashboard\n                 */\n                $(document).on('click', \".addtilestodashboard\", function() {\n                    require(['block_reportdashboard/reportdashboard'], function(reportdashboard) {\n                        reportdashboard.addtiles_to_dashboard();\n                    });\n                });\n\n                /**\n                 * Update dashboard title\n                 */\n                $(document).on('click', \".updatedashboardtitle\", function() {\n                    var name = $(this).data(\"name\");\n                    var dashboardrole = $(this).data(\"dashboardrole\");\n                    require(['block_reportdashboard/reportdashboard'], function(reportdashboard) {\n                        reportdashboard.updatedashboard(name, dashboardrole);\n                    });\n                });\n\n                /**\n                 * Delete dashboard\n                 */\n                $(document).on('click', \".deletedashboard\", function() {\n                    var instance = $(this).data(\"instance\");\n                    var random = $(this).data(\"random\");\n                    require(['block_reportdashboard/reportdashboard'], function(reportdashboard) {\n                        reportdashboard.Deletedashboard({instance: instance, random: random});\n                    });\n                });\n\n                /**\n                 * Delete popup\n                 */\n                $(document).on('click', \"#nobutton\", function(e) {\n                    var random = $(this).data(\"random\");\n                    require(['jquery', 'jqueryui'], function($) {\n                        $('#dashboard_delete_popup_'+random).dialog('close');\n                    });\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                    e.stopPropagation();\n                });\n\n                /**\n                 * Delete design dialog\n                 */\n                $(document).on('click', \"#designdeletecanceldialog\", function(e) {\n                    var reportinstance = $(this).data(\"reportinstance\");\n                    require(['jquery', 'jqueryui'], function($) {\n                        $('#delete_dialog'+reportinstance).dialog('close');\n                    });\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                    e.stopPropagation();\n                });\n\n                /**\n                 * Delete widget\n                 */\n                $(document).on('click', \"#roledeleteconfirm\", function(e) {\n                    var reportid = $(this).data(\"reportid\");\n                    var instanceid = $(this).data(\"instanceid\");\n                    require(['block_reportdashboard/reportdashboard'], function(reportdashboard) {\n                        reportdashboard.DeleteWidget({reportid: reportid, instanceid: instanceid});\n                    });\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                    e.stopPropagation();\n                });\n\n                /**\n                 * Add new dashboard\n                 */\n                $(document).on('click', \".addnewdashboard\", function() {\n                    require(['block_reportdashboard/reportdashboard'], function(reportdashboard) {\n                        reportdashboard.addnewdashboard();\n                    });\n                });\n\n                /**\n                 * Custom report report help text\n                 */\n                $(document).on('click', \".reportshelptext\", function(e) {\n                    var reportid = $(this).data('reportid');\n                    report.block_statistics_help(reportid);\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                    e.stopPropagation();\n                });\n\n                $(document).on('change', \".schuserroleslist\", function() {\n                    var reportid = $(this).data('reportid');\n                    var reportinstance = $(this).data('reportinstance');\n                    schedule.rolewiseusers({reportid: reportid, reportinstance: reportinstance});\n                });\n\n                /**\n                 * Add schedule form users for widget\n                 */\n\n                $(document).on('change', \".schusers_data\", function() {\n                    var reportid = $(this).data('reportid');\n                    var reportinstance = $(this).data('reportinstance');\n                    schedule.addschusers({reportid: reportid, reportinstance: reportinstance});\n                });\n\n                $(document).on('change', \"select[name='frequency']\", function() {\n                    var reportid = $(this).data('reportid');\n                    var reportinstance = $(this).data('reportinstance');\n                    schedule.frequency_schedule({reportid: reportid, reportinstance: reportinstance});\n                });\n\n                /**\n                 * Menu option for report widget on dashboard\n                 */\n\n            $(document).on('click', \".report_schedule\", function(e) {\n                var reportid = $(this).data('reportid');\n                var instanceid = $(this).data('instanceid');\n                var method = $(this).data('method');\n                require(['block_reportdashboard/reportdashboard'], function(reportdashboard) {\n                    if (typeof reportdashboard[method] === 'function') {\n                        reportdashboard[method]({\n                            reportid: reportid,\n                            instanceid: instanceid\n                        });\n                    }\n                });\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                $('.menupopupdropdown').dropdown('hide');\n            });\n\n               /**\n                * Filter area\n                */\n                $(document).on('click', \".filterform #id_filter_clear\", function() {\n                    $(this).parents('.mform').trigger(\"reset\");\n                    var activityelement = $(this).parents('.mform').find('#id_filter_activities');\n                    var instancelement = $(this).parents('.block_reportdashboard').find('.report_dashboard_container');\n                    var reportid = instancelement.data('reportid');\n                    var reporttype = instancelement.data('reporttype');\n                    var instanceid = instancelement.data('blockinstance');\n                    smartfilter.CourseActivities({courseid: 0, element: activityelement});\n                    $(\".filterform select[data-select2-ajax='1']\").val('0').trigger('change');\n                    $('.filterform')[0].reset();\n                    $(\".filterform #id_filter_clear\").attr('disabled', 'disabled');\n                    reportwidget.CreateDashboardwidget({reportid: reportid, reporttype: reporttype, instanceid: instanceid});\n                });\n                $(document).on('change', \"select[name='filter_coursecategories']\", function() {\n                    var categoryid = this.value;\n                    var courseelement = $(this).closest('.mform').find('#id_filter_courses');\n                    if (courseelement.length != 0) {\n                        smartfilter.categoryCourses({categoryid: categoryid, element: courseelement});\n                    }\n                });\n                $(document).on('change', \"select[name='filter_courses']\", function() {\n                    var courseid = this.value;\n                    var activityelement = $(this).closest('.mform').find('#id_filter_activities');\n                    if (activityelement.length != 0) {\n                        smartfilter.CourseActivities({courseid: courseid, element: activityelement});\n                    }\n                });\n                /**\n                 * Duration Filter\n                 */\n                flatpickr('#customrange', {\n                    mode: 'range',\n                    onOpen: function(selectedDates, dateStr, instance) {\n                        instance.clear();\n                    },\n                    onClose: function(selectedDates) {\n                        $('#lsfstartdate').val(selectedDates[0].getTime() / 1000);\n                        $('#lsfenddate').val((selectedDates[1].getTime() / 1000) + (60 * 60 * 24));\n                        require(['block_learnerscript/reportwidget'], function() {\n                            reportwidget.DashboardTiles();\n                            reportwidget.DashboardWidgets();\n                        });\n                    }\n                });\n                /**\n                 * Escape dropdown on click of window\n                 * @param {object} event\n                 */\n                window.onclick = function(event) {\n                    if (!event.target.matches('.dropbtn')) {\n                        var dropdowns = document.getElementsByClassName(\"dropdown-content\");\n                        var i;\n                        for (i = 0; i < dropdowns.length; i++) {\n                            var openDropdown = dropdowns[i];\n                            if ($(openDropdown).hasClass('show')) {\n                                $(openDropdown).toggleClass('show');\n                            }\n                        }\n                    }\n                };\n            },\n            /**\n             * Add reports as blocks to dashboard\n             * @return {[type]} [description]\n             */\n            addblocks_to_dashboard: function() {\n                Str.get_string('addblockstodashboard','block_reportdashboard'\n                ).then(function(s) {\n                    if($('.reportslist').html().length > 0){\n                        $('.reportslist').dialog();\n                    } else{\n\n                    $.urlParam = function(name){\n                    var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\n                    if (results === null || results == ' ' ){\n                       return null;\n                    } else{\n                       return results[1] || 0;\n                    }\n                };\n                var role=$.urlParam('role');\n                var dashboardurl=$.urlParam('dashboardurl');\n                var contextlevel=$.urlParam('contextlevel');\n                var promise = Ajax.call([{\n                    methodname: 'block_reportdashboard_addwidget_to_dashboard',\n                    args: {\n                        role: role,\n                        dashboardurl: dashboardurl,\n                        contextlevel: contextlevel,\n                    },\n                }]);\n                promise[0].done(function(response) {\n                    var widget_title_img = \"<img class='dialog_title_icon' alt='Add Widgets' src='\" +\n                        M.util.image_url(\"add_widgets_icon\", \"block_reportdashboard\") + \"'/>\";\n                    $('.reportslist').dialog({\n                        title: s,\n                        modal: true,\n                        minWidth: 700,\n                        maxHeight: 600\n                    });\n                    $('.reportslist').closest(\".ui-dialog\")\n                        .find(\".ui-dialog-titlebar-close\")\n                        .removeClass(\"ui-dialog-titlebar-close\")\n                        .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                    $('.reportslist').closest(\".ui-dialog\").find('.ui-dialog-title')\n                        .html(widget_title_img + s);\n                    var resp = JSON.parse(response);\n                    $('.reportslist').html(resp);\n                }).fail(function() {\n                    // do something with the exception\n                });\n            }\n                });\n            },\n            addtiles_to_dashboard: function() {\n                Str.get_string('addtilestodashboard','block_reportdashboard'\n                ).then(function(s) {\n                    if($('.statistics_reportslist').html().length > 0) {\n                        $('.statistics_reportslist').dialog();\n                    } else {\n                     $.urlParam = function(name){\n                    var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\n                    if (results === null || results == ' ' ){\n                       return null;\n                    } else{\n                       return results[1] || 0;\n                    }\n                };\n\n                var role=$.urlParam('role');\n                var dashboardurl=$.urlParam('dashboardurl');\n                var contextlevel=$.urlParam('contextlevel');\n                var promise = Ajax.call([{\n                    methodname: 'block_reportdashboard_addtiles_to_dashboard',\n                     args: {\n                        role: role,\n                        dashboardurl: dashboardurl,\n                        contextlevel: contextlevel,\n                    },\n                }]);\n                 promise[0].done(function(response) {\n                    var tile_title_img = \"<img class='dialog_title_icon' alt='Add Tiles' src='\" +\n                        M.util.image_url(\"add_tiles_icon\", \"block_reportdashboard\") + \"'/>\";\n                    $('.statistics_reportslist').dialog({\n                        title: s,\n                        modal: true,\n                        minWidth: 600,\n                        maxHeight: 600\n                    });\n                    $('.statistics_reportslist').closest(\".ui-dialog\")\n                        .find(\".ui-dialog-titlebar-close\")\n                        .removeClass(\"ui-dialog-titlebar-close\")\n                        .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                    $('.statistics_reportslist').closest(\".ui-dialog\").find('.ui-dialog-title')\n                        .html(tile_title_img + s);\n                    var resp = JSON.parse(response);\n                    $('.statistics_reportslist').html(resp);\n                    }).fail(function() {\n                    // do something with the exception\n                });\n                }\n                });\n            },\n            addnewdashboard: function() {\n                Str.get_string('addnewdashboard','block_reportdashboard'\n                ).then(function(s) {\n                    document.getElementById(\"id_dashboard\").value = '';\n                    $(\"#id_error_dashboard\").css('display', 'none');\n                    var tile_title_img = \"<img class='dialog_title_icon' alt='Add new dashboard' src='\" +\n                        M.util.image_url(\"add_tiles_icon\", \"block_reportdashboard\") + \"'/>\";\n                    $('.newreport_dashboard').dialog({\n                        title: s,\n                        modal: true,\n                        minWidth: 450,\n                        maxHeight: 600\n                    });\n                    $('.newreport_dashboard').closest(\".ui-dialog\")\n                        .find(\".ui-dialog-titlebar-close\")\n                        .removeClass(\"ui-dialog-titlebar-close\")\n                        .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                        var Closebutton = $('.ui-icon-closethick').parent();\n                        $(Closebutton).attr({\n                            \"title\" : \"Close\"\n                        });\n                    $('.newreport_dashboard').closest(\".ui-dialog\").find('.ui-dialog-title')\n                        .html(tile_title_img + s);\n                });\n            },\n            updatedashboard: function(oldname, role){\n                Str.get_string('updatedashboard','block_reportdashboard'\n                ).then(function(s) {\n                    $( \"#id_error_dashboard\" ).css('display', 'none');\n                    $( \"#id_error_dashboard_nospaces\" ).css('display', 'none');\n                    var tile_title_img = \"<img class='dialog_title_icon' alt='Add new dashboard' src='\" +\n                        M.util.image_url(\"add_tiles_icon\", \"block_reportdashboard\") + \"'/>\";\n                    $('.newreport_dashboard').dialog({\n                        title: s,\n                        modal: true,\n                        minWidth: 450,\n                        maxHeight: 600\n                    });\n                    $('.newreport_dashboard').closest(\".ui-dialog\")\n                        .find(\".ui-dialog-titlebar-close\")\n                        .removeClass(\"ui-dialog-titlebar-close\")\n                        .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                        var Closebutton = $('.ui-icon-closethick').parent();\n                        $(Closebutton).attr({\n                            \"title\" : \"Close\"\n                        });\n                    $('.newreport_dashboard').closest(\".ui-dialog\").find('.ui-dialog-title')\n                        .html(tile_title_img + s);\n                    document.getElementById(\"id_dashboard\").value = oldname;\n                    $(\"#createdashbaord_form\").submit(function(event){\n\n                        var dashboardname = $( \"#id_dashboard\" ).val();\n                        var name = dashboardname.trim();\n                        if (name === '' || name === null) {\n                            $( \"#id_error_dashboard\" ).css('display', 'block');\n                            $( \"#id_error_dashboard_nospaces\" ).css('display', 'none');\n                            event.preventDefault();\n                            return false;\n                        }\n                        var spaceexist = name.indexOf(\" \");\n                        if (spaceexist > 0 && spaceexist != '') {\n                            $( \"#id_error_dashboard\" ).css('display', 'none');\n                            $( \"#id_error_dashboard_nospaces\" ).css('display', 'block');\n                            event.preventDefault();\n                            return false;\n                        }\n\n                        var args = {};\n                        args.action = 'updatedashboard';\n                        args.role = role;\n                        args.oldname = oldname;\n                        args.newname = document.getElementById(\"id_dashboard\").value ;\n                        ajax.call({\n                            args:args,\n                            url: M.cfg.wwwroot + \"/blocks/reportdashboard/ajax.php\"\n                        });\n                    });\n                });\n            },\n            sendreportemail: function(args) {\n                Str.get_strings([{\n                    key: 'sendemail',\n                    component: 'block_reportdashboard'\n                }]).then(function(s) {\n                    var url = M.cfg.wwwroot + '/blocks/learnerscript/ajax.php';\n                    args.nodeContent = 'sendreportemail' + args.instanceid;\n                    args.action = 'sendreportemail';\n                    args.title = s;\n                    var AjaxForms = require('block_learnerscript/ajaxforms');\n                    AjaxForms.init(args, url);\n                });\n            },\n            reportfilter: function(args) {\n                var self = this;\n                if ($('.report_filter_' + args.instanceid).length < 1) {\n                    var promise = Ajax.call([{\n                        methodname: 'block_learnerscript_reportfilter',\n                        args: {\n                            action: 'reportfilter',\n                            reportid: args.reportid,\n                            instance: args.instanceid\n                        }\n                    }]);\n                    promise[0].done(function(resp) {\n                        $('body').append(\"<div class='report_filter_\" + args.instanceid +\n                        \"' style='display:none;'>\" + resp + \"</div>\");\n                        $(\"select[data-select2-ajax='1']\").each(function() {\n                            if (!$(this).hasClass('select2-hidden-accessible')) {\n                                helper.Select2Ajax({});\n                            }\n                        });\n                        self.reportFilterFormModal(args);\n                         $('.filterform' + args.instanceid + ' .fitemtitle').hide();\n                          $('.filterform' + args.instanceid + ' .felement').attr('style', 'margin:0');\n                    });\n                } else {\n                    self.reportFilterFormModal(args);\n                }\n            },\n            reportFilterFormModal: function(args) {\n                Str.get_string('reportfilters', 'block_reportdashboard'\n                ).then(function(s) {\n                    var titleimg = \"<img class='dialog_title_icon' alt='Filter' src='\" +\n                        M.util.image_url(\"reportfilter\", \"block_reportdashboard\") + \"'/>\";\n                    $(\".report_filter_\" + args.instanceid).dialog({\n                        title: s,\n                        dialogClass: 'reportfilter-popup',\n                        modal: true,\n                        resizable: true,\n                        autoOpen: true,\n                        draggable: false,\n                        width: 420,\n                        height: 'auto',\n                        appendTo: \"#inst\" + args.instanceid,\n                        position: {\n                            my: \"center\",\n                            at: \"center\",\n                            of: \"#inst\" + args.instanceid,\n                            within: \"#inst\" + args.instanceid\n                        },\n                        open: function() {\n                        $(this).closest(\".ui-dialog\")\n                            .find(\".ui-dialog-titlebar-close\")\n                            .removeClass(\"ui-dialog-titlebar-close\")\n                            .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                            var Closebutton = $('.ui-icon-closethick').parent();\n                            $(Closebutton).attr({\n                                \"title\": \"Close\"\n                            });\n\n                        $(this).closest(\".ui-dialog\")\n                            .find('.ui-dialog-title').html(titleimg + s);\n\n                        /* Submit button */\n                        $(\".report_filter_\" + args.instanceid + \" form  #id_filter_apply\").click(function(e) {\n                            e.preventDefault();\n                            e.stopImmediatePropagation();\n                            if ($(\"#reportcontainer\" + args.instanceid).html().length > 0) {\n                                args.reporttype = $(\"#reportcontainer\" + args.instanceid).data('reporttype');\n                            } else {\n                                args.reporttype = $(\"#plotreportcontainer\" + args.instanceid).data('reporttype');\n                            }\n                            args.container = '#reporttype_' + args.reportid;\n\n                            require(['block_learnerscript/reportwidget'], function(reportwidget) {\n                                reportwidget.CreateDashboardwidget({reportid: args.reportid,\n                                                             reporttype: args.reporttype,\n                                                             instanceid: args.instanceid});\n                                $(\".report_filter_\" + args.instanceid).dialog('close');\n                            });\n                            $(\".report_filter_\" + args.instanceid + \" form #id_filter_clear\").removeAttr('disabled');\n                        });\n                    }\n                });\n                $(\".report_filter_\" + args.instanceid + \" form #id_filter_clear\").click(function(e) {\n                    e.preventDefault();\n                    $(\".filterform\" + args.instanceid + \" select[data-select2-ajax='1']\").val('0').trigger('change');\n                    $('.filterform' + args.instanceid).trigger(\"reset\");\n                    require(['block_learnerscript/reportwidget'], function(reportwidget) {\n                        reportwidget.DashboardWidgets(args);\n                        $(\".report_filter_\" + args.instanceid).dialog('close');\n                    });\n                    $(\".report_filter_\" + args.instanceid).dialog('close');\n                });\n            });\n            },\n            DeleteWidget: function(args) {\n                Str.get_string('deletewidget', 'block_reportdashboard'\n                ).then(function(s) {\n                    $(\"#delete_dialog\" + args.instanceid).dialog({\n                        resizable: true,\n                        autoOpen: true,\n                        width: 460,\n                        height: 210,\n                        title: s,\n                        modal: true,\n                        appendTo: \"#inst\" + args.instanceid,\n                        position: {\n                            my: \"center\",\n                            at: \"center\",\n                            of: \"#inst\" + args.instanceid,\n                            within: \"#inst\" + args.instanceid\n                        },\n                        open: function() {\n                            $(this).closest(\".ui-dialog\")\n                                .find(\".ui-dialog-titlebar-close\")\n                                .removeClass(\"ui-dialog-titlebar-close\")\n                                .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                                var Closebutton = $('.ui-icon-closethick').parent();\n                                $(Closebutton).attr({\n                                    \"title\": \"Close\"\n                                });\n                        }\n                    });\n                });\n            },\n            Deletedashboard: function(args) {\n                Str.get_string('deletedashboard','block_reportdashboard'\n                ).then(function(s) {\n                    $( \"#dashboard_delete_popup_\"+args.random).dialog({\n                        resizable: false,\n                        height: 150,\n                        width: 375,\n                        modal: true,\n                        title : s,\n                        open: function() {\n                        $(this).closest(\".ui-dialog\")\n                            .find(\".ui-dialog-titlebar-close\")\n                            .removeClass(\"ui-dialog-titlebar-close\")\n                            .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                            var Closebutton = $('.ui-icon-closethick').parent();\n                            $(Closebutton).attr({\n                                \"title\" : \"Close\"\n                            });\n                        },\n                        close: function() {\n                            $(this).dialog('destroy').hide();\n                        }\n                    });\n                });\n            },\n            /**\n             * Schedule report form in popup in dashboard\n             * @param  {object} args reportid\n             */\n            schreportform: function(args) {\n                Str.get_string('schedulereport', 'block_reportdashboard'\n                ).then(function(s) {\n                    var url = M.cfg.wwwroot + '/blocks/learnerscript/ajax.php';\n                    args.title = s;\n                    args.nodeContent = 'schreportform' + args.instanceid;\n                    args.action = 'schreportform';\n                    args.courseid = $('[name=\"filter_courses\"]').val();\n                    var AjaxForms = require('block_learnerscript/ajaxforms');\n                    AjaxForms.init(args, url);\n                });\n            },\n\n            profileuserfunction: function() {\n                /** User profile user on changes  function*/\n                $(document).on('change', \"#dashboardusers\", function() {\n                    let queryString = window.location.search;\n                    // Step 2: Create a URLSearchParams object\n                    let params = new URLSearchParams(queryString);\n\n                    // Step 3: Get specific parameter values\n                    let role = params.get('role');\n                    let contextlevel = params.get('contextlevel');\n                    var url = $(this).val(); // get selected value\n                    if (url) { // require a URL\n                        window.location = 'profilepage.php?filter_users=' + url\n                                    + '&role=' + role + '&contextlevel=' + contextlevel; // redirect\n                    }\n                    return false;\n                });\n                $(document).on('change', \"#dashboardcourses\", function() {\n                    var url = $(this).val(); // get selected value\n                    if (url) { // require a URL\n                        window.location = 'courseprofile.php?filter_courses=' + url; // redirect\n                    }\n                    return false;\n                });\n            }\n        };\n    });\n"],"names":["define","$","Ajax","report","reportwidget","schedule","helper","ajax","select2","dataTable","smartfilter","flatpickr","Str","init","document","ajaxStop","fadeOut","Select2Ajax","change","courseid","this","val","DashboardTiles","DashboardWidgets","each","attr","submit","event","name","trim","css","preventDefault","spaceexist","indexOf","ui","dialog","prototype","_focusTabbable","noop","offset","top","action","multiple","on","require","reportdashboard","addblocks_to_dashboard","addtiles_to_dashboard","data","dashboardrole","updatedashboard","instance","random","Deletedashboard","e","stopImmediatePropagation","stopPropagation","reportinstance","reportid","instanceid","DeleteWidget","addnewdashboard","block_statistics_help","rolewiseusers","addschusers","frequency_schedule","method","dropdown","parents","trigger","activityelement","find","instancelement","reporttype","CourseActivities","element","reset","CreateDashboardwidget","categoryid","value","courseelement","closest","length","categoryCourses","mode","onOpen","selectedDates","dateStr","clear","onClose","getTime","window","onclick","target","matches","i","dropdowns","getElementsByClassName","openDropdown","hasClass","toggleClass","get_string","then","s","html","urlParam","results","RegExp","exec","location","href","role","dashboardurl","contextlevel","call","methodname","args","done","response","widget_title_img","M","util","image_url","title","modal","minWidth","maxHeight","removeClass","resp","JSON","parse","fail","tile_title_img","getElementById","Closebutton","parent","oldname","newname","url","cfg","wwwroot","sendreportemail","get_strings","key","component","nodeContent","reportfilter","self","append","reportFilterFormModal","hide","titleimg","dialogClass","resizable","autoOpen","draggable","width","height","appendTo","position","my","at","of","within","open","click","container","removeAttr","close","schreportform","profileuserfunction","queryString","search","params","URLSearchParams","get"],"mappings":";;;;;;;AAsBAA,+CAAO,CAAC,SACA,YACA,6BACA,mCACA,+BACA,6BACA,2BACA,sCACA,mDACA,kCACA,gCACA,WACA,WACA,wDAEJ,SAASC,EAAGC,KAAMC,OAAQC,aAAcC,SAAUC,OAAQC,KAAMC,QAASC,UACrEC,YAAaC,UAAWC,KACxB,MAAO,CACHC,KAAM,WACEZ,EAAEa,UAAUC,UAAS,WAChBd,EAAE,WAAWe,QAAQ,WAE1BV,OAAOW,YAAY,IACnBhB,EAAE,qBAAqBiB,QAAO,WAC1B,IAAIC,SAAWlB,EAAEmB,MAAMC,MACvBpB,EAAE,mBAAmBoB,IAAIF,UACzBf,aAAakB,iBACblB,aAAamB,mBACbtB,EAAE,aAAauB,MAAK,WAChBvB,EAAEmB,MAAMK,KAAK,cAIrBxB,EAAG,yBAA0ByB,QAAO,SAAUC,OAC1C,IACIC,KADgB3B,EAAG,iBAAkBoB,MAChBQ,OACb,KAATD,MAAwB,OAATA,OACd3B,EAAG,uBAAwB6B,IAAI,UAAW,SAC1C7B,EAAG,gCAAiC6B,IAAI,UAAW,QACnDH,MAAMI,kBAEV,IAAIC,WAAaJ,KAAKK,QAAQ,KAC3BD,WAAa,GAAmB,IAAdA,aACjB/B,EAAG,uBAAwB6B,IAAI,UAAW,QAC1C7B,EAAG,gCAAiC6B,IAAI,UAAW,SACnDH,MAAMI,qBAIlB9B,EAAEiC,GAAGC,OAAOC,UAAUC,eAAiBpC,EAAEqC,KACzCrC,EAAE,YAAYsC,OAAO,CAACC,IAAK,IAI3BvC,EAAE,4BAA4BO,UAC9BF,OAAOW,YAAY,CACfwB,OAAQ,aACRC,UAAU,IAMdzC,EAAEa,UAAU6B,GAAG,QAAS,yBAAyB,WAC7CC,QAAQ,CAAC,0CAA0C,SAASC,iBACxDA,gBAAgBC,+BAOxB7C,EAAEa,UAAU6B,GAAG,QAAS,wBAAwB,WAC5CC,QAAQ,CAAC,0CAA0C,SAASC,iBACxDA,gBAAgBE,8BAOxB9C,EAAEa,UAAU6B,GAAG,QAAS,yBAAyB,WAC7C,IAAIf,KAAO3B,EAAEmB,MAAM4B,KAAK,QACpBC,cAAgBhD,EAAEmB,MAAM4B,KAAK,iBACjCJ,QAAQ,CAAC,0CAA0C,SAASC,iBACxDA,gBAAgBK,gBAAgBtB,KAAMqB,qBAO9ChD,EAAEa,UAAU6B,GAAG,QAAS,oBAAoB,WACxC,IAAIQ,SAAWlD,EAAEmB,MAAM4B,KAAK,YACxBI,OAASnD,EAAEmB,MAAM4B,KAAK,UAC1BJ,QAAQ,CAAC,0CAA0C,SAASC,iBACxDA,gBAAgBQ,gBAAgB,CAACF,SAAUA,SAAUC,OAAQA,eAOrEnD,EAAEa,UAAU6B,GAAG,QAAS,aAAa,SAASW,GAC1C,IAAIF,OAASnD,EAAEmB,MAAM4B,KAAK,UAC1BJ,QAAQ,CAAC,SAAU,aAAa,SAAS3C,GACrCA,EAAE,2BAA2BmD,QAAQjB,OAAO,YAEhDmB,EAAEvB,iBACFuB,EAAEC,2BACFD,EAAEE,qBAMNvD,EAAEa,UAAU6B,GAAG,QAAS,6BAA6B,SAASW,GAC1D,IAAIG,eAAiBxD,EAAEmB,MAAM4B,KAAK,kBAClCJ,QAAQ,CAAC,SAAU,aAAa,SAAS3C,GACrCA,EAAE,iBAAiBwD,gBAAgBtB,OAAO,YAE9CmB,EAAEvB,iBACFuB,EAAEC,2BACFD,EAAEE,qBAMNvD,EAAEa,UAAU6B,GAAG,QAAS,sBAAsB,SAASW,GACnD,IAAII,SAAWzD,EAAEmB,MAAM4B,KAAK,YACxBW,WAAa1D,EAAEmB,MAAM4B,KAAK,cAC9BJ,QAAQ,CAAC,0CAA0C,SAASC,iBACxDA,gBAAgBe,aAAa,CAACF,SAAUA,SAAUC,WAAYA,gBAElEL,EAAEvB,iBACFuB,EAAEC,2BACFD,EAAEE,qBAMNvD,EAAEa,UAAU6B,GAAG,QAAS,oBAAoB,WACxCC,QAAQ,CAAC,0CAA0C,SAASC,iBACxDA,gBAAgBgB,wBAOxB5D,EAAEa,UAAU6B,GAAG,QAAS,oBAAoB,SAASW,GACjD,IAAII,SAAWzD,EAAEmB,MAAM4B,KAAK,YAC5B7C,OAAO2D,sBAAsBJ,UAC7BJ,EAAEvB,iBACFuB,EAAEC,2BACFD,EAAEE,qBAGNvD,EAAEa,UAAU6B,GAAG,SAAU,qBAAqB,WAC1C,IAAIe,SAAWzD,EAAEmB,MAAM4B,KAAK,YACxBS,eAAiBxD,EAAEmB,MAAM4B,KAAK,kBAClC3C,SAAS0D,cAAc,CAACL,SAAUA,SAAUD,eAAgBA,oBAOhExD,EAAEa,UAAU6B,GAAG,SAAU,kBAAkB,WACvC,IAAIe,SAAWzD,EAAEmB,MAAM4B,KAAK,YACxBS,eAAiBxD,EAAEmB,MAAM4B,KAAK,kBAClC3C,SAAS2D,YAAY,CAACN,SAAUA,SAAUD,eAAgBA,oBAG9DxD,EAAEa,UAAU6B,GAAG,SAAU,4BAA4B,WACjD,IAAIe,SAAWzD,EAAEmB,MAAM4B,KAAK,YACxBS,eAAiBxD,EAAEmB,MAAM4B,KAAK,kBAClC3C,SAAS4D,mBAAmB,CAACP,SAAUA,SAAUD,eAAgBA,oBAOzExD,EAAEa,UAAU6B,GAAG,QAAS,oBAAoB,SAASW,GACjD,IAAII,SAAWzD,EAAEmB,MAAM4B,KAAK,YACxBW,WAAa1D,EAAEmB,MAAM4B,KAAK,cAC1BkB,OAASjE,EAAEmB,MAAM4B,KAAK,UAC1BJ,QAAQ,CAAC,0CAA0C,SAASC,iBACjB,mBAA5BA,gBAAgBqB,SACvBrB,gBAAgBqB,QAAQ,CACpBR,SAAUA,SACVC,WAAYA,gBAIxBL,EAAEvB,iBACFuB,EAAEC,2BACFD,EAAEE,kBACFvD,EAAE,sBAAsBkE,SAAS,WAMjClE,EAAEa,UAAU6B,GAAG,QAAS,gCAAgC,WACpD1C,EAAEmB,MAAMgD,QAAQ,UAAUC,QAAQ,SAClC,IAAIC,gBAAkBrE,EAAEmB,MAAMgD,QAAQ,UAAUG,KAAK,yBACjDC,eAAiBvE,EAAEmB,MAAMgD,QAAQ,0BAA0BG,KAAK,+BAChEb,SAAWc,eAAexB,KAAK,YAC/ByB,WAAaD,eAAexB,KAAK,cACjCW,WAAaa,eAAexB,KAAK,iBACrCtC,YAAYgE,iBAAiB,CAACvD,SAAU,EAAGwD,QAASL,kBACpDrE,EAAE,6CAA6CoB,IAAI,KAAKgD,QAAQ,UAChEpE,EAAE,eAAe,GAAG2E,QACpB3E,EAAE,gCAAgCwB,KAAK,WAAY,YACnDrB,aAAayE,sBAAsB,CAACnB,SAAUA,SAAUe,WAAYA,WAAYd,WAAYA,gBAEhG1D,EAAEa,UAAU6B,GAAG,SAAU,0CAA0C,WAC/D,IAAImC,WAAa1D,KAAK2D,MAClBC,cAAgB/E,EAAEmB,MAAM6D,QAAQ,UAAUV,KAAK,sBACvB,GAAxBS,cAAcE,QACdxE,YAAYyE,gBAAgB,CAACL,WAAYA,WAAYH,QAASK,mBAGtE/E,EAAEa,UAAU6B,GAAG,SAAU,iCAAiC,WACtD,IAAIxB,SAAWC,KAAK2D,MAChBT,gBAAkBrE,EAAEmB,MAAM6D,QAAQ,UAAUV,KAAK,yBACvB,GAA1BD,gBAAgBY,QAChBxE,YAAYgE,iBAAiB,CAACvD,SAAUA,SAAUwD,QAASL,qBAMnE3D,UAAU,eAAgB,CACtByE,KAAM,QACNC,OAAQ,SAASC,cAAeC,QAASpC,UACrCA,SAASqC,SAEbC,QAAS,SAASH,eACdrF,EAAE,iBAAiBoB,IAAIiE,cAAc,GAAGI,UAAY,KACpDzF,EAAE,eAAeoB,IAAKiE,cAAc,GAAGI,UAAY,IAAS,OAC5D9C,QAAQ,CAAC,qCAAqC,WAC1CxC,aAAakB,iBACblB,aAAamB,yBAQzBoE,OAAOC,QAAU,SAASjE,OACtB,IAAKA,MAAMkE,OAAOC,QAAQ,YAAa,CACnC,IACIC,EADAC,UAAYlF,SAASmF,uBAAuB,oBAEhD,IAAKF,EAAI,EAAGA,EAAIC,UAAUd,OAAQa,IAAK,CACnC,IAAIG,aAAeF,UAAUD,GACzB9F,EAAEiG,cAAcC,SAAS,SACzBlG,EAAEiG,cAAcE,YAAY,YAUhDtD,uBAAwB,WACpBlC,IAAIyF,WAAW,uBAAuB,yBACpCC,MAAK,SAASC,GACZ,GAAGtG,EAAE,gBAAgBuG,OAAOtB,OAAS,EACjCjF,EAAE,gBAAgBkC,aAChB,CAENlC,EAAEwG,SAAW,SAAS7E,MACtB,IAAI8E,QAAU,IAAIC,OAAO,OAAU/E,KAAO,aAAagF,KAAKjB,OAAOkB,SAASC,MAC5E,OAAgB,OAAZJ,SAA+B,KAAXA,QACd,KAEAA,QAAQ,IAAM,GAG5B,IAAIK,KAAK9G,EAAEwG,SAAS,QAChBO,aAAa/G,EAAEwG,SAAS,gBACxBQ,aAAahH,EAAEwG,SAAS,gBACdvG,KAAKgH,KAAK,CAAC,CACrBC,WAAY,+CACZC,KAAM,CACFL,KAAMA,KACNC,aAAcA,aACdC,aAAcA,iBAGd,GAAGI,MAAK,SAASC,UACrB,IAAIC,iBAAmB,yDACnBC,EAAEC,KAAKC,UAAU,mBAAoB,yBAA2B,MACpEzH,EAAE,gBAAgBkC,OAAO,CACrBwF,MAAOpB,EACPqB,OAAO,EACPC,SAAU,IACVC,UAAW,MAEf7H,EAAE,gBAAgBgF,QAAQ,cACrBV,KAAK,6BACLwD,YAAY,4BACZvB,KAAK,2EACVvG,EAAE,gBAAgBgF,QAAQ,cAAcV,KAAK,oBACxCiC,KAAKe,iBAAmBhB,GAC7B,IAAIyB,KAAOC,KAAKC,MAAMZ,UACtBrH,EAAE,gBAAgBuG,KAAKwB,SACxBG,MAAK,oBAMZpF,sBAAuB,WACnBnC,IAAIyF,WAAW,sBAAsB,yBACnCC,MAAK,SAASC,GACZ,GAAGtG,EAAE,2BAA2BuG,OAAOtB,OAAS,EAC5CjF,EAAE,2BAA2BkC,aAC1B,CACNlC,EAAEwG,SAAW,SAAS7E,MACvB,IAAI8E,QAAU,IAAIC,OAAO,OAAU/E,KAAO,aAAagF,KAAKjB,OAAOkB,SAASC,MAC5E,OAAgB,OAAZJ,SAA+B,KAAXA,QACd,KAEAA,QAAQ,IAAM,GAI5B,IAAIK,KAAK9G,EAAEwG,SAAS,QAChBO,aAAa/G,EAAEwG,SAAS,gBACxBQ,aAAahH,EAAEwG,SAAS,gBACdvG,KAAKgH,KAAK,CAAC,CACrBC,WAAY,8CACXC,KAAM,CACHL,KAAMA,KACNC,aAAcA,aACdC,aAAcA,iBAGb,GAAGI,MAAK,SAASC,UACtB,IAAIc,eAAiB,uDACjBZ,EAAEC,KAAKC,UAAU,iBAAkB,yBAA2B,MAClEzH,EAAE,2BAA2BkC,OAAO,CAChCwF,MAAOpB,EACPqB,OAAO,EACPC,SAAU,IACVC,UAAW,MAEf7H,EAAE,2BAA2BgF,QAAQ,cAChCV,KAAK,6BACLwD,YAAY,4BACZvB,KAAK,2EACVvG,EAAE,2BAA2BgF,QAAQ,cAAcV,KAAK,oBACnDiC,KAAK4B,eAAiB7B,GAC3B,IAAIyB,KAAOC,KAAKC,MAAMZ,UACtBrH,EAAE,2BAA2BuG,KAAKwB,SAC/BG,MAAK,oBAMhBtE,gBAAiB,WACbjD,IAAIyF,WAAW,kBAAkB,yBAC/BC,MAAK,SAASC,GACZzF,SAASuH,eAAe,gBAAgBtD,MAAQ,GAChD9E,EAAE,uBAAuB6B,IAAI,UAAW,QACxC,IAAIsG,eAAiB,+DACjBZ,EAAEC,KAAKC,UAAU,iBAAkB,yBAA2B,MAClEzH,EAAE,wBAAwBkC,OAAO,CAC7BwF,MAAOpB,EACPqB,OAAO,EACPC,SAAU,IACVC,UAAW,MAEf7H,EAAE,wBAAwBgF,QAAQ,cAC7BV,KAAK,6BACLwD,YAAY,4BACZvB,KAAK,2EACN,IAAI8B,YAAcrI,EAAE,uBAAuBsI,SAC3CtI,EAAEqI,aAAa7G,KAAK,CAChBkG,MAAU,UAElB1H,EAAE,wBAAwBgF,QAAQ,cAAcV,KAAK,oBAChDiC,KAAK4B,eAAiB7B,OAGnCrD,gBAAiB,SAASsF,QAASzB,MAC/BnG,IAAIyF,WAAW,kBAAkB,yBAC/BC,MAAK,SAASC,GACZtG,EAAG,uBAAwB6B,IAAI,UAAW,QAC1C7B,EAAG,gCAAiC6B,IAAI,UAAW,QACnD,IAAIsG,eAAiB,+DACjBZ,EAAEC,KAAKC,UAAU,iBAAkB,yBAA2B,MAClEzH,EAAE,wBAAwBkC,OAAO,CAC7BwF,MAAOpB,EACPqB,OAAO,EACPC,SAAU,IACVC,UAAW,MAEf7H,EAAE,wBAAwBgF,QAAQ,cAC7BV,KAAK,6BACLwD,YAAY,4BACZvB,KAAK,2EACN,IAAI8B,YAAcrI,EAAE,uBAAuBsI,SAC3CtI,EAAEqI,aAAa7G,KAAK,CAChBkG,MAAU,UAElB1H,EAAE,wBAAwBgF,QAAQ,cAAcV,KAAK,oBAChDiC,KAAK4B,eAAiB7B,GAC3BzF,SAASuH,eAAe,gBAAgBtD,MAAQyD,QAChDvI,EAAE,yBAAyByB,QAAO,SAASC,OAEvC,IACIC,KADgB3B,EAAG,iBAAkBoB,MAChBQ,OACzB,GAAa,KAATD,MAAwB,OAATA,KAIf,OAHA3B,EAAG,uBAAwB6B,IAAI,UAAW,SAC1C7B,EAAG,gCAAiC6B,IAAI,UAAW,QACnDH,MAAMI,kBACC,EAEX,IAAIC,WAAaJ,KAAKK,QAAQ,KAC9B,GAAID,WAAa,GAAmB,IAAdA,WAIlB,OAHA/B,EAAG,uBAAwB6B,IAAI,UAAW,QAC1C7B,EAAG,gCAAiC6B,IAAI,UAAW,SACnDH,MAAMI,kBACC,EAGX,IAAIqF,KAAO,CACXA,OAAc,mBACdA,KAAKL,KAAOA,KACZK,KAAKoB,QAAUA,QACfpB,KAAKqB,QAAU3H,SAASuH,eAAe,gBAAgBtD,MACvDxE,KAAK2G,KAAK,CACNE,KAAKA,KACLsB,IAAKlB,EAAEmB,IAAIC,QAAU,4CAKrCC,gBAAiB,SAASzB,MACtBxG,IAAIkI,YAAY,CAAC,CACbC,IAAK,YACLC,UAAW,2BACX1C,MAAK,SAASC,GACd,IAAImC,IAAMlB,EAAEmB,IAAIC,QAAU,iCAC1BxB,KAAK6B,YAAc,kBAAoB7B,KAAKzD,WAC5CyD,KAAK3E,OAAS,kBACd2E,KAAKO,MAAQpB,EACG3D,QAAQ,iCACd/B,KAAKuG,KAAMsB,SAG7BQ,aAAc,SAAS9B,MACnB,IAAI+B,KAAO/H,KACPnB,EAAE,kBAAoBmH,KAAKzD,YAAYuB,OAAS,EAClChF,KAAKgH,KAAK,CAAC,CACrBC,WAAY,mCACZC,KAAM,CACF3E,OAAQ,eACRiB,SAAU0D,KAAK1D,SACfP,SAAUiE,KAAKzD,eAGf,GAAG0D,MAAK,SAASW,MACrB/H,EAAE,QAAQmJ,OAAO,6BAA+BhC,KAAKzD,WACrD,2BAA6BqE,KAAO,UACpC/H,EAAE,iCAAiCuB,MAAK,WAC/BvB,EAAEmB,MAAM+E,SAAS,8BAClB7F,OAAOW,YAAY,OAG3BkI,KAAKE,sBAAsBjC,MAC1BnH,EAAE,cAAgBmH,KAAKzD,WAAa,gBAAgB2F,OACnDrJ,EAAE,cAAgBmH,KAAKzD,WAAa,cAAclC,KAAK,QAAS,eAGtE0H,KAAKE,sBAAsBjC,OAGnCiC,sBAAuB,SAASjC,MAC5BxG,IAAIyF,WAAW,gBAAiB,yBAC9BC,MAAK,SAASC,GACZ,IAAIgD,SAAW,oDACX/B,EAAEC,KAAKC,UAAU,eAAgB,yBAA2B,MAChEzH,EAAE,kBAAoBmH,KAAKzD,YAAYxB,OAAO,CAC1CwF,MAAOpB,EACPiD,YAAa,qBACb5B,OAAO,EACP6B,WAAW,EACXC,UAAU,EACVC,WAAW,EACXC,MAAO,IACPC,OAAQ,OACRC,SAAU,QAAU1C,KAAKzD,WACzBoG,SAAU,CACNC,GAAI,SACJC,GAAI,SACJC,GAAI,QAAU9C,KAAKzD,WACnBwG,OAAQ,QAAU/C,KAAKzD,YAE3ByG,KAAM,WACNnK,EAAEmB,MAAM6D,QAAQ,cACXV,KAAK,6BACLwD,YAAY,4BACZvB,KAAK,2EACN,IAAI8B,YAAcrI,EAAE,uBAAuBsI,SAC3CtI,EAAEqI,aAAa7G,KAAK,CAChBkG,MAAS,UAGjB1H,EAAEmB,MAAM6D,QAAQ,cACXV,KAAK,oBAAoBiC,KAAK+C,SAAWhD,GAG9CtG,EAAE,kBAAoBmH,KAAKzD,WAAa,2BAA2B0G,OAAM,SAAS/G,GAC9EA,EAAEvB,iBACFuB,EAAEC,2BACEtD,EAAE,mBAAqBmH,KAAKzD,YAAY6C,OAAOtB,OAAS,EACxDkC,KAAK3C,WAAaxE,EAAE,mBAAqBmH,KAAKzD,YAAYX,KAAK,cAE/DoE,KAAK3C,WAAaxE,EAAE,uBAAyBmH,KAAKzD,YAAYX,KAAK,cAEvEoE,KAAKkD,UAAY,eAAiBlD,KAAK1D,SAEvCd,QAAQ,CAAC,qCAAqC,SAASxC,cACnDA,aAAayE,sBAAsB,CAACnB,SAAU0D,KAAK1D,SACtBe,WAAY2C,KAAK3C,WACjBd,WAAYyD,KAAKzD,aAC9C1D,EAAE,kBAAoBmH,KAAKzD,YAAYxB,OAAO,YAElDlC,EAAE,kBAAoBmH,KAAKzD,WAAa,0BAA0B4G,WAAW,kBAIzFtK,EAAE,kBAAoBmH,KAAKzD,WAAa,0BAA0B0G,OAAM,SAAS/G,GAC7EA,EAAEvB,iBACF9B,EAAE,cAAgBmH,KAAKzD,WAAa,kCAAkCtC,IAAI,KAAKgD,QAAQ,UACvFpE,EAAE,cAAgBmH,KAAKzD,YAAYU,QAAQ,SAC3CzB,QAAQ,CAAC,qCAAqC,SAASxC,cACnDA,aAAamB,iBAAiB6F,MAC9BnH,EAAE,kBAAoBmH,KAAKzD,YAAYxB,OAAO,YAElDlC,EAAE,kBAAoBmH,KAAKzD,YAAYxB,OAAO,gBAItDyB,aAAc,SAASwD,MACnBxG,IAAIyF,WAAW,eAAgB,yBAC7BC,MAAK,SAASC,GACZtG,EAAE,iBAAmBmH,KAAKzD,YAAYxB,OAAO,CACzCsH,WAAW,EACXC,UAAU,EACVE,MAAO,IACPC,OAAQ,IACRlC,MAAOpB,EACPqB,OAAO,EACPkC,SAAU,QAAU1C,KAAKzD,WACzBoG,SAAU,CACNC,GAAI,SACJC,GAAI,SACJC,GAAI,QAAU9C,KAAKzD,WACnBwG,OAAQ,QAAU/C,KAAKzD,YAE3ByG,KAAM,WACFnK,EAAEmB,MAAM6D,QAAQ,cACXV,KAAK,6BACLwD,YAAY,4BACZvB,KAAK,2EACN,IAAI8B,YAAcrI,EAAE,uBAAuBsI,SAC3CtI,EAAEqI,aAAa7G,KAAK,CAChBkG,MAAS,iBAMjCtE,gBAAiB,SAAS+D,MACtBxG,IAAIyF,WAAW,kBAAkB,yBAC/BC,MAAK,SAASC,GACZtG,EAAG,2BAA2BmH,KAAKhE,QAAQjB,OAAO,CAC9CsH,WAAW,EACXI,OAAQ,IACRD,MAAO,IACPhC,OAAO,EACPD,MAAQpB,EACR6D,KAAM,WACNnK,EAAEmB,MAAM6D,QAAQ,cACXV,KAAK,6BACLwD,YAAY,4BACZvB,KAAK,2EACN,IAAI8B,YAAcrI,EAAE,uBAAuBsI,SAC3CtI,EAAEqI,aAAa7G,KAAK,CAChBkG,MAAU,WAGlB6C,MAAO,WACHvK,EAAEmB,MAAMe,OAAO,WAAWmH,cAS1CmB,cAAe,SAASrD,MACpBxG,IAAIyF,WAAW,iBAAkB,yBAC/BC,MAAK,SAASC,GACZ,IAAImC,IAAMlB,EAAEmB,IAAIC,QAAU,iCAC1BxB,KAAKO,MAAQpB,EACba,KAAK6B,YAAc,gBAAkB7B,KAAKzD,WAC1CyD,KAAK3E,OAAS,gBACd2E,KAAKjG,SAAWlB,EAAE,2BAA2BoB,MAC7BuB,QAAQ,iCACd/B,KAAKuG,KAAMsB,SAI7BgC,oBAAqB,WAEjBzK,EAAEa,UAAU6B,GAAG,SAAU,mBAAmB,WACxC,IAAIgI,YAAchF,OAAOkB,SAAS+D,OAE9BC,OAAS,IAAIC,gBAAgBH,aAG7B5D,KAAO8D,OAAOE,IAAI,QAClB9D,aAAe4D,OAAOE,IAAI,gBAC9B,IAAIrC,IAAMzI,EAAEmB,MAAMC,MAKlB,OAJIqH,MACA/C,OAAOkB,SAAW,gCAAkC6B,IACtC,SAAW3B,KAAO,iBAAmBE,eAEhD,KAEXhH,EAAEa,UAAU6B,GAAG,SAAU,qBAAqB,WAC1C,IAAI+F,IAAMzI,EAAEmB,MAAMC,MAIlB,OAHIqH,MACA/C,OAAOkB,SAAW,oCAAsC6B,MAErD,MAIvB"}